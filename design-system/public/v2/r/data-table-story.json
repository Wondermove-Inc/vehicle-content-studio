{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "data-table-story",
  "type": "registry:component",
  "title": "Data Table Story",
  "author": "Lloyd Richards <lloyd.d.richards@gmail.com>",
  "description": "Interactive Storybook stories demonstrating data table component usage with sorting, filtering, and pagination",
  "dependencies": [
    "@tanstack/react-table",
    "lucide-react"
  ],
  "registryDependencies": [
    "table",
    "button",
    "checkbox",
    "dropdown-menu",
    "input"
  ],
  "files": [
    {
      "path": "src/registry/atoms/data-table-story/data-table.stories.tsx",
      "content": "\"use client\";\n\nimport React from \"react\";\nimport type { Meta, StoryObj } from \"@storybook/react-vite\";\nimport {\n  ColumnDef,\n  ColumnFiltersState,\n  flexRender,\n  getCoreRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  getSortedRowModel,\n  SortingState,\n  useReactTable,\n  VisibilityState,\n} from \"@tanstack/react-table\";\nimport { ArrowUpDown, ChevronDown, MoreHorizontal } from \"lucide-react\";\nimport { expect, userEvent, waitFor, within } from \"storybook/test\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport {\n  DropdownMenu,\n  DropdownMenuCheckboxItem,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\n\n// ğŸ¯ ëª©ì : ê²°ì œ ë°ì´í„° íƒ€ì… ì •ì˜ - í…Œì´ë¸”ì— í‘œì‹œë  ë°ì´í„° êµ¬ì¡°\ntype Payment = {\n  id: string; // ê²°ì œ ê³ ìœ  ID\n  amount: number; // ê²°ì œ ê¸ˆì•¡ (USD)\n  status: \"pending\" | \"processing\" | \"success\" | \"failed\"; // ê²°ì œ ìƒíƒœ\n  email: string; // ì‚¬ìš©ì ì´ë©”ì¼\n};\n\n// ğŸ¯ ëª©ì : í…ŒìŠ¤íŠ¸ìš© ê²°ì œ ë°ì´í„° - ë‹¤ì–‘í•œ ìƒíƒœì™€ ê¸ˆì•¡ì„ í¬í•¨í•œ ìƒ˜í”Œ ë°ì´í„°\nconst data: Payment[] = [\n  {\n    id: \"m5gr84i9\",\n    amount: 316,\n    status: \"success\",\n    email: \"ken99@example.com\",\n  },\n  {\n    id: \"3u1reuv4\",\n    amount: 242,\n    status: \"success\",\n    email: \"Abe45@example.com\",\n  },\n  {\n    id: \"derv1ws0\",\n    amount: 837,\n    status: \"processing\",\n    email: \"Monserrat44@example.com\",\n  },\n  {\n    id: \"5kma53ae\",\n    amount: 874,\n    status: \"success\",\n    email: \"Silas22@example.com\",\n  },\n  {\n    id: \"bhqecj4p\",\n    amount: 721,\n    status: \"failed\",\n    email: \"carmella@example.com\",\n  },\n];\n\n// ğŸ¯ ëª©ì : TanStack Table ì»¬ëŸ¼ ì •ì˜ - ê° ì»¬ëŸ¼ì˜ í—¤ë”, ì…€ ë Œë”ë§, ì •ë ¬/í•„í„° ì„¤ì •\nconst columns: ColumnDef<Payment>[] = [\n  {\n    // í–‰ ì„ íƒìš© ì²´í¬ë°•ìŠ¤ ì»¬ëŸ¼\n    id: \"select\",\n    header: ({ table }) => (\n      <Checkbox\n        // ëª¨ë“  í˜ì´ì§€ í–‰ì´ ì„ íƒë˜ì—ˆëŠ”ì§€ ë˜ëŠ” ì¼ë¶€ë§Œ ì„ íƒë˜ì—ˆëŠ”ì§€ í™•ì¸\n        checked={\n          table.getIsAllPageRowsSelected() ||\n          (table.getIsSomePageRowsSelected() && \"indeterminate\")\n        }\n        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}\n        aria-label=\"Select all\"\n      />\n    ),\n    cell: ({ row }) => (\n      <Checkbox\n        checked={row.getIsSelected()}\n        onCheckedChange={(value) => row.toggleSelected(!!value)}\n        aria-label=\"Select row\"\n      />\n    ),\n    enableSorting: false, // ì²´í¬ë°•ìŠ¤ ì»¬ëŸ¼ì€ ì •ë ¬ ë¶ˆê°€\n    enableHiding: false, // ì²´í¬ë°•ìŠ¤ ì»¬ëŸ¼ì€ ìˆ¨ê¹€ ë¶ˆê°€\n  },\n  {\n    // ê²°ì œ ìƒíƒœ ì»¬ëŸ¼ (pending, processing, success, failed)\n    accessorKey: \"status\",\n    header: \"Status\",\n    cell: ({ row }) => (\n      <div className=\"capitalize\">{row.getValue(\"status\")}</div>\n    ),\n  },\n  {\n    // ì´ë©”ì¼ ì»¬ëŸ¼ - ì •ë ¬ ê¸°ëŠ¥ì´ í¬í•¨ëœ í—¤ë” ë²„íŠ¼\n    accessorKey: \"email\",\n    header: ({ column }) => {\n      return (\n        <Button\n          variant=\"ghost\"\n          onClick={() => column.toggleSorting(column.getIsSorted() === \"asc\")}\n        >\n          Email\n          <ArrowUpDown className=\"ml-2 h-4 w-4\" />\n        </Button>\n      );\n    },\n    cell: ({ row }) => <div className=\"lowercase\">{row.getValue(\"email\")}</div>,\n  },\n  {\n    // ê¸ˆì•¡ ì»¬ëŸ¼ - í†µí™” í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…\n    accessorKey: \"amount\",\n    header: () => <div className=\"text-right\">Amount</div>,\n    cell: ({ row }) => {\n      const amount = parseFloat(row.getValue(\"amount\"));\n\n      // ë‹¬ëŸ¬ í†µí™” í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…\n      const formatted = new Intl.NumberFormat(\"en-US\", {\n        style: \"currency\",\n        currency: \"USD\",\n      }).format(amount);\n\n      return <div className=\"text-right font-medium\">{formatted}</div>;\n    },\n  },\n  {\n    // í–‰ë³„ ì•¡ì…˜ ë©”ë‰´ ì»¬ëŸ¼\n    id: \"actions\",\n    enableHiding: false, // ì•¡ì…˜ ì»¬ëŸ¼ì€ í•­ìƒ í‘œì‹œ\n    cell: ({ row }) => {\n      const payment = row.original;\n\n      return (\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\n              <span className=\"sr-only\">Open menu</span>\n              <MoreHorizontal className=\"h-4 w-4\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\">\n            <DropdownMenuLabel>Actions</DropdownMenuLabel>\n            <DropdownMenuItem\n              onClick={() => navigator.clipboard.writeText(payment.id)}\n            >\n              Copy payment ID\n            </DropdownMenuItem>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem>View customer</DropdownMenuItem>\n            <DropdownMenuItem>View payment details</DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      );\n    },\n  },\n];\n\nfunction DataTableDemo() {\n  // ğŸ¯ ëª©ì : í…Œì´ë¸” ì •ë ¬ ìƒíƒœ ê´€ë¦¬ (ì»¬ëŸ¼ë³„ ì˜¤ë¦„ì°¨ìˆœ/ë‚´ë¦¼ì°¨ìˆœ)\n  const [sorting, setSorting] = React.useState<SortingState>([]);\n  // ğŸ¯ ëª©ì : ì»¬ëŸ¼ë³„ í•„í„° ìƒíƒœ ê´€ë¦¬ (ì´ë©”ì¼ ê²€ìƒ‰ ë“±)\n  const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>(\n    [],\n  );\n  // ğŸ¯ ëª©ì : ì»¬ëŸ¼ í‘œì‹œ/ìˆ¨ê¹€ ìƒíƒœ ê´€ë¦¬\n  const [columnVisibility, setColumnVisibility] =\n    React.useState<VisibilityState>({});\n  // ğŸ¯ ëª©ì : í–‰ ì„ íƒ ìƒíƒœ ê´€ë¦¬ (ì²´í¬ë°•ìŠ¤ ì„ íƒëœ í–‰ë“¤)\n  const [rowSelection, setRowSelection] = React.useState({});\n\n  // ğŸ¯ ëª©ì : TanStack Table ì¸ìŠ¤í„´ìŠ¤ ìƒì„± - ëª¨ë“  í…Œì´ë¸” ê¸°ëŠ¥ì„ í†µí•© ê´€ë¦¬\n  const table = useReactTable({\n    data, // í‘œì‹œí•  ë°ì´í„° ë°°ì—´\n    columns, // ì»¬ëŸ¼ ì •ì˜ ë°°ì—´\n    onSortingChange: setSorting, // ì •ë ¬ ìƒíƒœ ë³€ê²½ í•¸ë“¤ëŸ¬\n    onColumnFiltersChange: setColumnFilters, // ì»¬ëŸ¼ í•„í„° ìƒíƒœ ë³€ê²½ í•¸ë“¤ëŸ¬\n    getCoreRowModel: getCoreRowModel(), // ê¸°ë³¸ í–‰ ëª¨ë¸ (í•„ìˆ˜)\n    getPaginationRowModel: getPaginationRowModel(), // í˜ì´ì§€ë„¤ì´ì…˜ ê¸°ëŠ¥\n    getSortedRowModel: getSortedRowModel(), // ì •ë ¬ ê¸°ëŠ¥\n    getFilteredRowModel: getFilteredRowModel(), // í•„í„°ë§ ê¸°ëŠ¥\n    onColumnVisibilityChange: setColumnVisibility, // ì»¬ëŸ¼ í‘œì‹œ/ìˆ¨ê¹€ ìƒíƒœ ë³€ê²½ í•¸ë“¤ëŸ¬\n    onRowSelectionChange: setRowSelection, // í–‰ ì„ íƒ ìƒíƒœ ë³€ê²½ í•¸ë“¤ëŸ¬\n    state: {\n      // í˜„ì¬ í…Œì´ë¸” ìƒíƒœ ê°ì²´\n      sorting,\n      columnFilters,\n      columnVisibility,\n      rowSelection,\n    },\n  });\n\n  return (\n    <div className=\"w-full\">\n      {/* í…Œì´ë¸” ìƒë‹¨ ì»¨íŠ¸ë¡¤ ì˜ì—­: í•„í„°ë§ ì…ë ¥ê³¼ ì»¬ëŸ¼ í‘œì‹œ/ìˆ¨ê¹€ ë©”ë‰´ */}\n      <div className=\"flex items-center py-4\">\n        {/* ì´ë©”ì¼ í•„í„°ë§ ì…ë ¥ í•„ë“œ */}\n        <Input\n          placeholder=\"Filter emails...\"\n          value={(table.getColumn(\"email\")?.getFilterValue() as string) ?? \"\"}\n          onChange={(event) =>\n            table.getColumn(\"email\")?.setFilterValue(event.target.value)\n          }\n          className=\"max-w-sm\"\n        />\n        {/* ì»¬ëŸ¼ í‘œì‹œ/ìˆ¨ê¹€ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ */}\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"outline\" className=\"ml-auto\">\n              Columns <ChevronDown className=\"ml-2 h-4 w-4\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\">\n            {table\n              .getAllColumns()\n              .filter((column) => column.getCanHide()) // ìˆ¨ê¸¸ ìˆ˜ ìˆëŠ” ì»¬ëŸ¼ë§Œ í•„í„°ë§\n              .map((column) => {\n                return (\n                  <DropdownMenuCheckboxItem\n                    key={column.id}\n                    className=\"capitalize\"\n                    checked={column.getIsVisible()}\n                    onCheckedChange={(value) =>\n                      column.toggleVisibility(!!value)\n                    }\n                  >\n                    {column.id}\n                  </DropdownMenuCheckboxItem>\n                );\n              })}\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n      {/* í…Œì´ë¸” ë³¸ì²´ ì˜ì—­ */}\n      <div className=\"rounded-md border\">\n        <Table>\n          {/* í…Œì´ë¸” í—¤ë” */}\n          <TableHeader>\n            {table.getHeaderGroups().map((headerGroup) => (\n              <TableRow key={headerGroup.id}>\n                {headerGroup.headers.map((header) => {\n                  return (\n                    <TableHead key={header.id}>\n                      {header.isPlaceholder\n                        ? null\n                        : flexRender(\n                            header.column.columnDef.header,\n                            header.getContext(),\n                          )}\n                    </TableHead>\n                  );\n                })}\n              </TableRow>\n            ))}\n          </TableHeader>\n          {/* í…Œì´ë¸” ë°”ë”” */}\n          <TableBody>\n            {table.getRowModel().rows?.length ? (\n              // ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°: ê° í–‰ì„ ë Œë”ë§\n              table.getRowModel().rows.map((row) => (\n                <TableRow\n                  key={row.id}\n                  data-state={row.getIsSelected() && \"selected\"} // ì„ íƒëœ í–‰ í‘œì‹œ\n                >\n                  {row.getVisibleCells().map((cell) => (\n                    <TableCell key={cell.id}>\n                      {flexRender(\n                        cell.column.columnDef.cell,\n                        cell.getContext(),\n                      )}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))\n            ) : (\n              // ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°: \"No results\" ë©”ì‹œì§€ í‘œì‹œ\n              <TableRow>\n                <TableCell\n                  colSpan={columns.length}\n                  className=\"h-24 text-center\"\n                >\n                  No results.\n                </TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </div>\n      {/* í…Œì´ë¸” í•˜ë‹¨: ì„ íƒëœ í–‰ ìˆ˜ì™€ í˜ì´ì§€ë„¤ì´ì…˜ ì»¨íŠ¸ë¡¤ */}\n      <div className=\"flex items-center justify-end space-x-2 py-4\">\n        {/* ì„ íƒëœ í–‰ ìˆ˜ í‘œì‹œ */}\n        <div className=\"text-muted-foreground flex-1 text-sm\">\n          {table.getFilteredSelectedRowModel().rows.length} of{\" \"}\n          {table.getFilteredRowModel().rows.length} row(s) selected.\n        </div>\n        {/* í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ */}\n        <div className=\"space-x-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => table.previousPage()}\n            disabled={!table.getCanPreviousPage()}\n          >\n            Previous\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => table.nextPage()}\n            disabled={!table.getCanNextPage()}\n          >\n            Next\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/**\n * A powerful data table component with sorting, filtering, and pagination.\n * Built using TanStack Table and shadcn/ui components.\n *\n * This component demonstrates the integration of TanStack Table with shadcn/ui\n * to create feature-rich data tables that include:\n * - Column sorting with visual indicators\n * - Email filtering with real-time search\n * - Row selection with bulk operations\n * - Column visibility toggles\n * - Responsive pagination controls\n * - Accessible keyboard navigation\n * - Action menus for row-specific operations\n *\n * The implementation follows shadcn/ui patterns and is fully compatible\n * with the shadcn CLI for easy installation in projects.\n */\nconst meta = {\n  title: \"ui/DataTable\",\n  component: DataTableDemo,\n  tags: [\"autodocs\"],\n  parameters: {\n    layout: \"centered\",\n    docs: {\n      description: {\n        component: `\nA comprehensive data table implementation using TanStack Table and shadcn/ui components.\n\n## Features\n\n- **Sorting**: Click column headers to sort data ascending/descending\n- **Filtering**: Real-time email filtering with search input\n- **Selection**: Individual row selection with bulk operations\n- **Pagination**: Navigate through data with Previous/Next controls\n- **Column Visibility**: Toggle column visibility via dropdown menu\n- **Actions**: Row-specific actions via dropdown menus\n- **Responsive**: Adapts to different screen sizes\n- **Accessible**: Full keyboard navigation and screen reader support\n\n## Installation\n\n\\`\\`\\`bash\nnpx shadcn@latest add data-table-story\n\\`\\`\\`\n\nThis will install the data table component along with all required dependencies including \\`@tanstack/react-table\\`.\n\n## Usage\n\n\\`\\`\\`tsx\nimport { DataTable } from \"@/components/data-table\"\nimport { columns } from \"@/components/data-table/columns\"\n\nconst data = [\n  // your data array\n]\n\nexport function DataTableDemo() {\n  return <DataTable columns={columns} data={data} />\n}\n\\`\\`\\`\n\n## Dependencies\n\n- \\`@tanstack/react-table\\` - Headless table library\n- \\`lucide-react\\` - Icons\n- All standard shadcn/ui components (table, button, checkbox, etc.)\n        `,\n      },\n    },\n  },\n  decorators: [\n    (Story) => (\n      <div className=\"w-[800px]\">\n        <Story />\n      </div>\n    ),\n  ],\n} satisfies Meta<typeof DataTableDemo>;\n\nexport default meta;\n\ntype Story = StoryObj<typeof meta>;\n\n/**\n * The default data table with all features enabled.\n *\n * This story demonstrates the complete data table implementation with:\n * - **Column Sorting**: Click on the \"Email\" header to sort alphabetically\n * - **Row Selection**: Use checkboxes to select individual rows or all rows\n * - **Email Filtering**: Type in the search input to filter by email address\n * - **Column Visibility**: Use the \"Columns\" dropdown to show/hide columns\n * - **Pagination**: Navigate between pages using Previous/Next buttons\n * - **Actions Menu**: Click the three-dot menu to access row actions\n *\n * The table includes sample payment data with different statuses to showcase\n * various UI states and interactions.\n */\nexport const Default: Story = {};\n\n/**\n * Interactive test story demonstrating email filtering functionality.\n *\n * This story automatically types \"ken99\" into the filter input and verifies\n * that the table correctly filters to show only matching results.\n * Used for automated testing of the filtering feature.\n */\nexport const ShouldFilterTable: Story = {\n  name: \"when filtering by email, should display filtered rows\",\n  tags: [\"!dev\", \"!autodocs\"],\n  play: async ({ canvasElement }) => {\n    const canvas = within(canvasElement);\n\n    // ğŸ¯ ëª©ì : Email í•„í„° ì…ë ¥ ì‹œ í…Œì´ë¸”ì´ í•„í„°ë§ë˜ëŠ”ì§€ í™•ì¸\n    const filterInput = canvas.getByPlaceholderText(\"Filter emails...\");\n    await userEvent.type(filterInput, \"ken99\");\n\n    await waitFor(\n      () => {\n        // í•„í„°ë§ í›„ 1ê°œ í–‰ë§Œ í‘œì‹œë˜ì–´ì•¼ í•¨ (ken99@example.com)\n        const email = canvas.getByText(\"ken99@example.com\");\n        expect(email).toBeInTheDocument();\n      },\n      { timeout: 3000 },\n    );\n  },\n};\n\n/**\n * Interactive test story demonstrating column sorting functionality.\n *\n * This story automatically clicks the \"Email\" column header to trigger sorting\n * and verifies that the sort functionality works correctly with visual feedback.\n * Used for automated testing of the sorting feature.\n */\nexport const ShouldSortTable: Story = {\n  name: \"when clicking sort button, should sort table\",\n  tags: [\"!dev\", \"!autodocs\"],\n  play: async ({ canvasElement }) => {\n    const canvas = within(canvasElement);\n\n    // ğŸ¯ ëª©ì : Email ì»¬ëŸ¼ ì •ë ¬ ë²„íŠ¼ í´ë¦­ ì‹œ í…Œì´ë¸”ì´ ì •ë ¬ë˜ëŠ”ì§€ í™•ì¸\n    const emailSortButton = canvas.getByRole(\"button\", { name: /email/i });\n    await userEvent.click(emailSortButton);\n\n    await waitFor(\n      () => {\n        // ì •ë ¬ ë²„íŠ¼ì— ì •ë ¬ ì•„ì´ì½˜ì´ í‘œì‹œë˜ì–´ì•¼ í•¨\n        expect(emailSortButton).toBeInTheDocument();\n      },\n      { timeout: 2000 },\n    );\n  },\n};\n\n/**\n * Interactive test story demonstrating row selection functionality.\n *\n * This story automatically clicks a row checkbox to select it and verifies\n * that the selection state updates correctly, including the selection count display.\n * Used for automated testing of the row selection feature.\n */\nexport const ShouldSelectRows: Story = {\n  name: \"when selecting rows, should update selection count\",\n  tags: [\"!dev\", \"!autodocs\"],\n  play: async ({ canvasElement }) => {\n    const canvas = within(canvasElement);\n\n    // ğŸ¯ ëª©ì : ì²« ë²ˆì§¸ í–‰ ì²´í¬ë°•ìŠ¤ ì„ íƒ\n    const checkboxes = canvas.getAllByRole(\"checkbox\");\n    const firstRowCheckbox = checkboxes[1]; // 0ì€ í—¤ë” ì²´í¬ë°•ìŠ¤\n    await userEvent.click(firstRowCheckbox);\n\n    await waitFor(\n      () => {\n        // ì„ íƒëœ í–‰ ìˆ˜ê°€ ì—…ë°ì´íŠ¸ë˜ì–´ì•¼ í•¨\n        const selectionText = canvas.getByText(/1 of \\d+ row\\(s\\) selected/);\n        expect(selectionText).toBeInTheDocument();\n      },\n      { timeout: 2000 },\n    );\n  },\n};\n\n/**\n * Interactive test story demonstrating column visibility toggle functionality.\n *\n * This story automatically clicks the \"Columns\" dropdown button to open the\n * column visibility menu and verifies that column options are displayed correctly.\n * Used for automated testing of the column visibility feature.\n */\nexport const ShouldToggleColumns: Story = {\n  name: \"when toggling column visibility, should hide/show columns\",\n  tags: [\"!dev\", \"!autodocs\"],\n  play: async ({ canvasElement }) => {\n    const canvas = within(canvasElement);\n\n    // ğŸ¯ ëª©ì : ì»¬ëŸ¼ í† ê¸€ ë©”ë‰´ ì—´ê¸°\n    const columnsButton = canvas.getByRole(\"button\", { name: /columns/i });\n    await userEvent.click(columnsButton);\n\n    await waitFor(\n      () => {\n        // ì»¬ëŸ¼ í† ê¸€ ì˜µì…˜ì´ í‘œì‹œë˜ì–´ì•¼ í•¨\n        const statusOption = canvas.getByText(\"status\");\n        expect(statusOption).toBeInTheDocument();\n      },\n      { timeout: 2000 },\n    );\n  },\n};\n",
      "type": "registry:component"
    }
  ],
  "categories": [
    "atoms",
    "storybook",
    "table",
    "data"
  ]
}
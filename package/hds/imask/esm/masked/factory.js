import{isObject as e,pick as s,isString as a}from"../core/utils.js";import r from"../core/holder.js";function n(e){if(null==e)throw new Error("mask property should be defined");return e instanceof RegExp?r.MaskedRegExp:a(e)?r.MaskedPattern:e===Date?r.MaskedDate:e===Number?r.MaskedNumber:Array.isArray(e)||e===Array?r.MaskedDynamic:r.Masked&&e.prototype instanceof r.Masked?e:r.Masked&&e instanceof r.Masked?e.constructor:e instanceof Function?r.MaskedFunction:(console.warn("Mask not found for mask",e),r.Masked)}function t(a){if(!a)throw new Error("Options in not defined");if(r.Masked){if(a.prototype instanceof r.Masked)return{mask:a};const{mask:n,...t}=a instanceof r.Masked?{mask:a}:e(a)&&a.mask instanceof r.Masked?a:{};if(n){const e=n.mask;return{...s(n,((e,s)=>!s.startsWith("_"))),mask:n.constructor,_mask:e,...t}}}return e(a)?{...a}:{mask:a}}function o(e){if(r.Masked&&e instanceof r.Masked)return e;const s=t(e),a=n(s.mask);if(!a)throw new Error("Masked class is not found for provided mask "+s.mask+", appropriate module needs to be imported manually before creating mask.");return s.mask===a&&delete s.mask,s._mask&&(s.mask=s._mask,delete s._mask),new a(s)}r.createMask=o;export{o as default,n as maskedClass,t as normalizeOpts};

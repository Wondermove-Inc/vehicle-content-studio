"use client";
import*as t from"react";import{Timeout as e}from"../useTimeout/useTimeout.js";let n=!0,r=!1;const i=new e,o={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(t){t.metaKey||t.altKey||t.ctrlKey||(n=!0)}function a(){n=!1}function s(){"hidden"===this.visibilityState&&r&&(n=!0)}function c(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch(t){}return n||function(t){const{type:e,tagName:n}=t;return!("INPUT"!==n||!o[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}function d(){const e=t.useCallback((t=>{var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",u,!0),e.addEventListener("mousedown",a,!0),e.addEventListener("pointerdown",a,!0),e.addEventListener("touchstart",a,!0),e.addEventListener("visibilitychange",s,!0))}),[]),n=t.useRef(!1);return{isFocusVisibleRef:n,onFocus:function(t){return!!c(t)&&(n.current=!0,!0)},onBlur:function(){return!!n.current&&(r=!0,i.start(100,(()=>{r=!1})),n.current=!1,!0)},ref:e}}export{d as default};

"use client";
import e from"../../../@babel/runtime/helpers/esm/extends.js";import t from"../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import*as o from"react";import r from"../../../prop-types/index.js";import{getPopperUtilityClass as n}from"./popperClasses.js";import{useClassNamesOverride as s}from"../utils/ClassNameConfigurator.js";import{jsx as i}from"react/jsx-runtime";import p from"../../utils/ownerDocument/ownerDocument.js";import{Portal as a}from"../Portal/Portal.js";import l from"../../utils/chainPropTypes/chainPropTypes.js";import c from"../../utils/HTMLElementType/HTMLElementType.js";import f from"../../utils/refType/refType.js";import u from"../../utils/useForkRef/useForkRef.js";import d from"../../utils/useEnhancedEffect/useEnhancedEffect.js";import{createPopper as m}from"../../../@popperjs/core/lib/popper.js";import{useSlotProps as h}from"../utils/useSlotProps.js";import b from"../../utils/composeClasses/composeClasses.js";const y=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],E=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function T(e){return"function"==typeof e?e():e}function j(e){return void 0!==e.nodeType}const P={},O=o.forwardRef((function(r,p){var a;const{anchorEl:l,children:c,direction:f,disablePortal:E,modifiers:P,open:O,placement:v,popperOptions:g,popperRef:R,slotProps:w={},slots:M={},TransitionProps:x}=r,N=t(r,y),C=o.useRef(null),k=u(C,p),S=o.useRef(null),D=u(S,R),I=o.useRef(D);d((()=>{I.current=D}),[D]),o.useImperativeHandle(R,(()=>S.current),[]);const U=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(v,f),[B,F]=o.useState(U),[H,L]=o.useState(T(l));o.useEffect((()=>{S.current&&S.current.forceUpdate()})),o.useEffect((()=>{l&&L(T(l))}),[l]),d((()=>{if(!H||!O)return;if("production"!==process.env.NODE_ENV&&H&&j(H)&&1===H.nodeType){const e=H.getBoundingClientRect();"test"!==process.env.NODE_ENV&&0===e.top&&0===e.left&&0===e.right&&0===e.bottom&&console.warn(["MUI: The `anchorEl` prop provided to the component is invalid.","The anchor element should be part of the document layout.","Make sure the element is present in the document or that it's not display none."].join("\n"))}let t=[{name:"preventOverflow",options:{altBoundary:E}},{name:"flip",options:{altBoundary:E}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:e})=>{F(e.placement)}}];null!=P&&(t=t.concat(P)),g&&null!=g.modifiers&&(t=t.concat(g.modifiers));const o=m(H,C.current,e({placement:U},g,{modifiers:t}));return I.current(o),()=>{o.destroy(),I.current(null)}}),[H,E,P,O,g,U]);const V={placement:B};null!==x&&(V.TransitionProps=x);const W=b({root:["root"]},s(n)),_=null!=(a=M.root)?a:"div",q=h({elementType:_,externalSlotProps:w.root,externalForwardedProps:N,additionalProps:{role:"tooltip",ref:k},ownerState:r,className:W.root});return i(_,e({},q,{children:"function"==typeof c?c(V):c}))})),v=o.forwardRef((function(r,n){const{anchorEl:s,children:l,container:c,direction:f="ltr",disablePortal:u=!1,keepMounted:d=!1,modifiers:m,open:h,placement:b="bottom",popperOptions:y=P,popperRef:v,style:g,transition:R=!1,slotProps:w={},slots:M={}}=r,x=t(r,E),[N,C]=o.useState(!0);if(!d&&!h&&(!R||N))return null;let k;if(c)k=c;else if(s){const e=T(s);k=e&&j(e)?p(e).body:p(null).body}const S=R?{in:h,onEnter:()=>{C(!1)},onExited:()=>{C(!0)}}:void 0;return i(a,{disablePortal:u,container:k,children:i(O,e({anchorEl:s,direction:f,disablePortal:u,modifiers:m,ref:n,open:R?!N:h,placement:b,popperOptions:y,popperRef:v,slotProps:w,slots:M},x,{style:e({position:"fixed",top:0,left:0,display:h||!d||R&&!N?void 0:"none"},g),TransitionProps:S,children:l}))})}));"production"!==process.env.NODE_ENV&&(v.propTypes={anchorEl:l(r.oneOfType([c,r.object,r.func]),(e=>{if(e.open){const t=T(e.anchorEl);if(t&&j(t)&&1===t.nodeType){const e=t.getBoundingClientRect();if("test"!==process.env.NODE_ENV&&0===e.top&&0===e.left&&0===e.right&&0===e.bottom)return new Error(["MUI: The `anchorEl` prop provided to the component is invalid.","The anchor element should be part of the document layout.","Make sure the element is present in the document or that it's not display none."].join("\n"))}else if(!t||"function"!=typeof t.getBoundingClientRect||!j(t)&&null!=t.contextElement&&1!==t.contextElement.nodeType)return new Error(["MUI: The `anchorEl` prop provided to the component is invalid.","It should be an HTML element instance or a virtualElement ","(https://popper.js.org/docs/v2/virtual-elements/)."].join("\n"))}return null})),children:r.oneOfType([r.node,r.func]),container:r.oneOfType([c,r.func]),direction:r.oneOf(["ltr","rtl"]),disablePortal:r.bool,keepMounted:r.bool,modifiers:r.arrayOf(r.shape({data:r.object,effect:r.func,enabled:r.bool,fn:r.func,name:r.any,options:r.object,phase:r.oneOf(["afterMain","afterRead","afterWrite","beforeMain","beforeRead","beforeWrite","main","read","write"]),requires:r.arrayOf(r.string),requiresIfExists:r.arrayOf(r.string)})),open:r.bool.isRequired,placement:r.oneOf(["auto-end","auto-start","auto","bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),popperOptions:r.shape({modifiers:r.array,onFirstUpdate:r.func,placement:r.oneOf(["auto-end","auto-start","auto","bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),strategy:r.oneOf(["absolute","fixed"])}),popperRef:f,slotProps:r.shape({root:r.oneOfType([r.func,r.object])}),slots:r.shape({root:r.elementType}),transition:r.bool});export{v as Popper};

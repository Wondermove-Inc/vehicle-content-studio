"use client";
import*as e from"react";import t from"../../../prop-types/index.js";import{jsx as n}from"react/jsx-runtime";import r from"../../utils/useForkRef/useForkRef.js";import o from"../../utils/useEventCallback/useEventCallback.js";import c from"../../utils/ownerDocument/ownerDocument.js";import u from"../../utils/elementAcceptingRef/elementAcceptingRef.js";import s from"../../utils/exactProp/exactProp.js";function i(e){return e.substring(2).toLowerCase()}function m(t){const{children:u,disableReactTree:s=!1,mouseEvent:m="onClick",onClickAway:f,touchEvent:p="onTouchEnd"}=t,l=e.useRef(!1),a=e.useRef(null),d=e.useRef(!1),E=e.useRef(!1);e.useEffect((()=>(setTimeout((()=>{d.current=!0}),0),()=>{d.current=!1})),[]);const v=r(u.ref,a),h=o((e=>{const t=E.current;E.current=!1;const n=c(a.current);if(!d.current||!a.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,n))return;if(l.current)return void(l.current=!1);let r;r=e.composedPath?e.composedPath().indexOf(a.current)>-1:!n.documentElement.contains(e.target)||a.current.contains(e.target),r||!s&&t||f(e)})),R=e=>t=>{E.current=!0;const n=u.props[e];n&&n(t)},T={ref:v};return!1!==p&&(T[p]=R(p)),e.useEffect((()=>{if(!1!==p){const e=i(p),t=c(a.current),n=()=>{l.current=!0};return t.addEventListener(e,h),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,h),t.removeEventListener("touchmove",n)}}}),[h,p]),!1!==m&&(T[m]=R(m)),e.useEffect((()=>{if(!1!==m){const e=i(m),t=c(a.current);return t.addEventListener(e,h),()=>{t.removeEventListener(e,h)}}}),[h,m]),n(e.Fragment,{children:e.cloneElement(u,T)})}"production"!==process.env.NODE_ENV&&(m.propTypes={children:u.isRequired,disableReactTree:t.bool,mouseEvent:t.oneOf(["onClick","onMouseDown","onMouseUp","onPointerDown","onPointerUp",!1]),onClickAway:t.func.isRequired,touchEvent:t.oneOf(["onTouchEnd","onTouchStart",!1])}),"production"!==process.env.NODE_ENV&&(m.propTypes=s(m.propTypes));export{m as ClickAwayListener};

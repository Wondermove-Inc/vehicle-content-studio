import e from"../../utils/getScrollbarSize/getScrollbarSize.js";import t from"../../utils/ownerDocument/ownerDocument.js";import o from"../../utils/ownerWindow/ownerWindow.js";function n(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function i(e){return parseInt(o(e).getComputedStyle(e).paddingRight,10)||0}function r(e,t,o,i,r){const s=[t,o,...i];[].forEach.call(e.children,(e=>{const t=-1===s.indexOf(e),o=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),o="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||o}(e);t&&o&&n(e,r)}))}function s(e,t){let o=-1;return e.some(((e,n)=>!!t(e)&&(o=n,!0))),o}function l(n,r){const s=[],l=n.container;if(!r.disableScrollLock){if(function(e){const n=t(e);return n.body===e?o(e).innerWidth>n.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(l)){const o=e(t(l));s.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${i(l)+o}px`;const n=t(l).querySelectorAll(".mui-fixed");[].forEach.call(n,(e=>{s.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight=`${i(e)+o}px`}))}let n;if(l.parentNode instanceof DocumentFragment)n=t(l).body;else{const e=l.parentElement,t=o(l);n="HTML"===(null==e?void 0:e.nodeName)&&"scroll"===t.getComputedStyle(e).overflowY?e:l}s.push({value:n.style.overflow,property:"overflow",el:n},{value:n.style.overflowX,property:"overflow-x",el:n},{value:n.style.overflowY,property:"overflow-y",el:n}),n.style.overflow="hidden"}return()=>{s.forEach((({value:e,el:t,property:o})=>{e?t.style.setProperty(o,e):t.style.removeProperty(o)}))}}class a{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let o=this.modals.indexOf(e);if(-1!==o)return o;o=this.modals.length,this.modals.push(e),e.modalRef&&n(e.modalRef,!1);const i=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);r(t,e.mount,e.modalRef,i,!0);const l=s(this.containers,(e=>e.container===t));return-1!==l?(this.containers[l].modals.push(e),o):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:i}),o)}mount(e,t){const o=s(this.containers,(t=>-1!==t.modals.indexOf(e))),n=this.containers[o];n.restore||(n.restore=l(n,t))}remove(e,t=!0){const o=this.modals.indexOf(e);if(-1===o)return o;const i=s(this.containers,(t=>-1!==t.modals.indexOf(e))),l=this.containers[i];if(l.modals.splice(l.modals.indexOf(e),1),this.modals.splice(o,1),0===l.modals.length)l.restore&&l.restore(),e.modalRef&&n(e.modalRef,t),r(l.container,e.mount,e.modalRef,l.hiddenSiblings,!1),this.containers.splice(i,1);else{const e=l.modals[l.modals.length-1];e.modalRef&&n(e.modalRef,!1)}return o}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}export{a as ModalManager,n as ariaHidden};

import r from"../../../@babel/runtime/helpers/esm/extends.js";import*as t from"react";import{clsx as e}from"../node_modules/clsx/dist/clsx.js";import{useGridRootProps as o}from"../hooks/utils/useGridRootProps.js";import{useGridApiContext as s}from"../hooks/utils/useGridApiContext.js";import{useGridApiEventHandler as l}from"../hooks/utils/useGridApiEventHandler.js";import{useGridSelector as i}from"../hooks/utils/useGridSelector.js";import{gridDimensionsSelector as n}from"../hooks/features/dimensions/gridDimensionsSelectors.js";import{gridDensityFactorSelector as c}from"../hooks/features/density/densitySelector.js";import{gridColumnsTotalWidthSelector as m}from"../hooks/features/columns/gridColumnsSelector.js";import{getTotalHeaderHeight as u}from"../hooks/features/columns/gridColumnsUtils.js";import{fastMemo as a}from"../utils/fastMemo.js";import{jsx as f}from"react/jsx-runtime";import d from"../../system/esm/styled.js";import{gridClasses as p,getDataGridUtilityClass as h}from"../constants/gridClasses.js";import g from"../../utils/useTimeout/useTimeout.js";import j from"../../utils/useEventCallback/useEventCallback.js";import A from"../../utils/composeClasses/composeClasses.js";const S=d("div",{name:"MuiDataGrid",slot:"ScrollArea",overridesResolver:(r,t)=>[{[`&.${p["scrollArea--left"]}`]:t["scrollArea--left"]},{[`&.${p["scrollArea--right"]}`]:t["scrollArea--right"]},t.scrollArea]})((()=>({position:"absolute",top:0,zIndex:101,width:20,bottom:0,[`&.${p["scrollArea--left"]}`]:{left:0},[`&.${p["scrollArea--right"]}`]:{right:0}})));const C=a((function(a){const{scrollDirection:d}=a,p=t.useRef(null),C=s(),k=g(),v=i(C,c),D=i(C,m),x=i(C,n),b=t.useRef({left:0,top:0}),w=()=>{if("left"===d)return b.current.left>0;if("right"===d){const r=D-x.viewportInnerSize.width;return b.current.left<r}return!1},[R,y]=t.useState(!1),[E,G]=t.useState(w),H=o(),M=r({},H,{scrollDirection:d}),$=(r=>{const{scrollDirection:t,classes:e}=r;return A({root:["scrollArea",`scrollArea--${t}`]},h,e)})(M),P=u(C,H),X=Math.floor(H.columnHeaderHeight*v),z={height:X,top:P-X};"left"===d?z.left=x.leftPinnedWidth:"right"===d&&(z.right=x.rightPinnedWidth+(x.hasScrollX?x.scrollbarSize:0));const I=j((r=>{let t;if(r.preventDefault(),"left"===d)t=r.clientX-p.current.getBoundingClientRect().right;else{if("right"!==d)throw new Error("MUI X: Wrong drag direction");t=Math.max(1,r.clientX-p.current.getBoundingClientRect().left)}t=1.5*(t-1)+1,k.start(0,(()=>{C.current.scroll({left:b.current.left+t,top:b.current.top})}))})),W=j((()=>{y(!0)})),B=j((()=>{y(!1)}));return l(C,"scrollPositionChange",(r=>{b.current=r,G(w)})),l(C,"columnHeaderDragStart",W),l(C,"columnHeaderDragEnd",B),R&&E?f(S,{ref:p,className:e($.root),ownerState:M,onDragOver:I,style:z}):null}));export{C as GridScrollArea};

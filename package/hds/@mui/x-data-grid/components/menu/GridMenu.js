import e from"../../../../@babel/runtime/helpers/esm/extends.js";import t from"../../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import*as o from"react";import r from"../../../../prop-types/index.js";import{clsx as s}from"../../node_modules/clsx/dist/clsx.js";import{gridClasses as n,getDataGridUtilityClass as i}from"../../constants/gridClasses.js";import{useGridRootProps as m}from"../../hooks/utils/useGridRootProps.js";import{useGridApiContext as l}from"../../hooks/utils/useGridApiContext.js";import{jsx as a}from"react/jsx-runtime";import p from"../../../material/styles/styled.js";import c from"../../../material/Popper/Popper.js";import u from"../../../utils/useEnhancedEffect/useEnhancedEffect.js";import d from"../../../material/Grow/Grow.js";import f from"../../../material/Paper/Paper.js";import h from"../../../utils/HTMLElementType/HTMLElementType.js";import E from"../../../utils/composeClasses/composeClasses.js";import{ClickAwayListener as j}from"../../../base/ClickAwayListener/ClickAwayListener.js";const b=["open","target","onClose","children","position","className","onExited"],x=p(c,{name:"MuiDataGrid",slot:"Menu",overridesResolver:(e,t)=>t.menu})((({theme:e})=>({zIndex:e.zIndex.modal,[`& .${n.menuList}`]:{outline:0}}))),g={"bottom-start":"top left","bottom-end":"top right"};function C(r){const{open:n,target:p,onClose:c,children:h,position:C,className:y,onExited:P}=r,v=t(r,b),w=l(),L=m(),T=(e=>{const{classes:t}=e;return E({root:["menu"]},i,t)})(L),M=o.useRef(null);u((()=>{n?M.current=document.activeElement instanceof HTMLElement?document.activeElement:null:(M.current?.focus?.(),M.current=null)}),[n]),o.useEffect((()=>{const e=n?"menuOpen":"menuClose";w.current.publishEvent(e,{target:p})}),[w,n,p]);const k=e=>{e.target&&(p===e.target||p?.contains(e.target))||c(e)};return a(x,e({as:L.slots.basePopper,className:s(y,T.root),ownerState:L,open:n,anchorEl:p,transition:!0,placement:C},v,L.slotProps?.basePopper,{children:({TransitionProps:t,placement:o})=>{return a(j,{onClickAway:k,mouseEvent:"onMouseDown",children:a(d,e({},t,{style:{transformOrigin:g[o]},onExited:(r=t?.onExited,e=>{r&&r(),P&&P(e)}),children:a(f,{children:h})}))});var r}}))}"production"!==process.env.NODE_ENV&&(C.propTypes={children:r.node,onClose:r.func.isRequired,onExited:r.func,open:r.bool.isRequired,position:r.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),target:h});export{C as GridMenu};

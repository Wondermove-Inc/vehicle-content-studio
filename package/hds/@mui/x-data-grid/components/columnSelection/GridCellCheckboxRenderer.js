import e from"../../../../@babel/runtime/helpers/esm/extends.js";import o from"../../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import*as s from"react";import t from"../../../../prop-types/index.js";import{useGridApiContext as r}from"../../hooks/utils/useGridApiContext.js";import{useGridRootProps as i}from"../../hooks/utils/useGridRootProps.js";import{getDataGridUtilityClass as c}from"../../constants/gridClasses.js";import{jsx as n}from"react/jsx-runtime";import l from"../../../utils/useForkRef/useForkRef.js";import u from"../../../utils/composeClasses/composeClasses.js";const a=["field","id","value","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","api"],p=s.forwardRef((function(t,p){const{field:d,id:f,value:m,rowNode:b,hasFocus:R,tabIndex:h}=t,x=o(t,a),k=r(),j=i(),w=(e=>{const{classes:o}=e;return u({root:["checkboxInput"]},c,o)})({classes:j.classes}),y=s.useRef(null),q=s.useRef(null),C=l(y,p);s.useLayoutEffect((()=>{if(0===h){const e=k.current.getCellElement(f,d);e&&(e.tabIndex=-1)}}),[k,h,f,d]),s.useEffect((()=>{if(R){const e=y.current?.querySelector("input");e?.focus({preventScroll:!0})}else q.current&&q.current.stop({})}),[R]);const g=s.useCallback((e=>{" "===e.key&&e.stopPropagation()}),[]);if("footer"===b.type||"pinnedRow"===b.type)return null;const E=k.current.isRowSelectable(f),v=k.current.getLocaleText(m?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return n(j.slots.baseCheckbox,e({ref:C,tabIndex:h,checked:m,onChange:e=>{const o={value:e.target.checked,id:f};k.current.publishEvent("rowSelectionCheckboxChange",o,e)},className:w.root,inputProps:{"aria-label":v},onKeyDown:g,disabled:!E,touchRippleRef:q},j.slotProps?.baseCheckbox,x))}));"production"!==process.env.NODE_ENV&&(p.propTypes={api:t.object.isRequired,cellMode:t.oneOf(["edit","view"]).isRequired,colDef:t.object.isRequired,field:t.string.isRequired,focusElementRef:t.oneOfType([t.func,t.shape({current:t.shape({focus:t.func.isRequired})})]),formattedValue:t.any,hasFocus:t.bool.isRequired,id:t.oneOfType([t.number,t.string]).isRequired,isEditable:t.bool,row:t.any.isRequired,rowNode:t.object.isRequired,tabIndex:t.oneOf([-1,0]).isRequired,value:t.any});const d=p;export{p as GridCellCheckboxForwardRef,d as GridCellCheckboxRenderer};

import e from"../../../../@babel/runtime/helpers/esm/extends.js";import t from"../../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import*as r from"react";import{clsx as o}from"../../node_modules/clsx/dist/clsx.js";import s from"../../../../prop-types/index.js";import{useGridApiContext as i}from"../../hooks/utils/useGridApiContext.js";import{useGridRootProps as l}from"../../hooks/utils/useGridRootProps.js";import{useGridSelector as a}from"../../hooks/utils/useGridSelector.js";import{isDeepEqual as n}from"../../utils/utils.js";import{jsx as c}from"react/jsx-runtime";import u from"../../../material/styles/styled.js";import m from"../../../material/TextField/TextField.js";import{gridQuickFilterValuesSelector as p}from"../../hooks/features/filter/gridFilterSelector.js";import d from"../../../utils/debounce/debounce.js";import b from"../../../utils/composeClasses/composeClasses.js";import{getDataGridUtilityClass as f}from"../../constants/gridClasses.js";const k=["quickFilterParser","quickFilterFormatter","debounceMs","className"],h=u(m,{name:"MuiDataGrid",slot:"ToolbarQuickFilter",overridesResolver:(e,t)=>t.toolbarQuickFilter})((({theme:e})=>({width:"auto",paddingBottom:e.spacing(.5),"& input":{marginLeft:e.spacing(.5)},"& .MuiInput-underline:before":{borderBottom:`1px solid ${(e.vars||e).palette.divider}`},'& input[type="search"]::-webkit-search-decoration,\n  & input[type="search"]::-webkit-search-cancel-button,\n  & input[type="search"]::-webkit-search-results-button,\n  & input[type="search"]::-webkit-search-results-decoration':{display:"none"}}))),F=e=>e.split(" ").filter((e=>""!==e)),j=e=>e.join(" ");function x(s){const u=i(),m=l(),x=(e=>{const{classes:t}=e;return b({root:["toolbarQuickFilter"]},f,t)})(m),g=a(u,p),{quickFilterParser:y=F,quickFilterFormatter:v=j,debounceMs:C=m.filterDebounceMs,className:P}=s,T=t(s,k),[q,I]=r.useState((()=>v(g??[]))),L=r.useRef(g);r.useEffect((()=>{n(L.current,g)||(L.current=g,I((e=>n(y(e),g)?e:v(g??[]))))}),[g,v,y]);const M=r.useCallback((e=>{const t=y(e);L.current=t,u.current.setQuickFilterValues(t)}),[u,y]),Q=r.useMemo((()=>d(M,C)),[M,C]),w=r.useCallback((e=>{const t=e.target.value;I(t),Q(t)}),[Q]),S=r.useCallback((()=>{I(""),M("")}),[M]);return c(h,e({as:m.slots.baseTextField,ownerState:m,variant:"standard",value:q,onChange:w,className:o(P,x.root),placeholder:u.current.getLocaleText("toolbarQuickFilterPlaceholder"),"aria-label":u.current.getLocaleText("toolbarQuickFilterLabel"),type:"search"},T,{InputProps:e({startAdornment:c(m.slots.quickFilterIcon,{fontSize:"small"}),endAdornment:c(m.slots.baseIconButton,e({"aria-label":u.current.getLocaleText("toolbarQuickFilterDeleteIconLabel"),size:"small",sx:{visibility:q?"visible":"hidden"},onClick:S},m.slotProps?.baseIconButton,{children:c(m.slots.quickFilterClearIcon,{fontSize:"small"})}))},T.InputProps)},m.slotProps?.baseTextField))}"production"!==process.env.NODE_ENV&&(x.propTypes={debounceMs:s.number,quickFilterFormatter:s.func,quickFilterParser:s.func});export{x as GridToolbarQuickFilter};

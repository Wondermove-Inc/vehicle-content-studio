import e from"../../../../@babel/runtime/helpers/esm/extends.js";import*as t from"react";import o from"../../../../prop-types/index.js";import{gridDensitySelector as r}from"../../hooks/features/density/densitySelector.js";import{isTabKey as s,isHideMenuKey as n}from"../../utils/keyboardUtils.js";import{useGridApiContext as l}from"../../hooks/utils/useGridApiContext.js";import{useGridSelector as a}from"../../hooks/utils/useGridSelector.js";import{GridMenu as i}from"../menu/GridMenu.js";import{useGridRootProps as c}from"../../hooks/utils/useGridRootProps.js";import{gridClasses as m}from"../../constants/gridClasses.js";import{jsx as u,jsxs as p}from"react/jsx-runtime";import d from"../../../utils/useId/useId.js";import f from"../../../utils/useForkRef/useForkRef.js";import b from"../../../material/MenuItem/MenuItem.js";import y from"../../../material/ListItemIcon/ListItemIcon.js";import j from"../../../material/MenuList/MenuList.js";const I=t.forwardRef((function(o,I){const{slotProps:h={}}=o,L=h.button||{},k=h.tooltip||{},x=l(),C=c(),D=a(x,r),v=d(),g=d(),[T,S]=t.useState(!1),M=t.useRef(null),P=f(I,M),R=[{icon:u(C.slots.densityCompactIcon,{}),label:x.current.getLocaleText("toolbarDensityCompact"),value:"compact"},{icon:u(C.slots.densityStandardIcon,{}),label:x.current.getLocaleText("toolbarDensityStandard"),value:"standard"},{icon:u(C.slots.densityComfortableIcon,{}),label:x.current.getLocaleText("toolbarDensityComfortable"),value:"comfortable"}],F=t.useMemo((()=>{switch(D){case"compact":return u(C.slots.densityCompactIcon,{});case"comfortable":return u(C.slots.densityComfortableIcon,{});default:return u(C.slots.densityStandardIcon,{})}}),[D,C]);if(C.disableDensitySelector)return null;const G=R.map(((e,t)=>p(b,{onClick:()=>{return t=e.value,x.current.setDensity(t),void S(!1);var t},selected:e.value===D,children:[u(y,{children:e.icon}),e.label]},t)));return p(t.Fragment,{children:[u(C.slots.baseTooltip,e({title:x.current.getLocaleText("toolbarDensityLabel"),enterDelay:1e3},k,C.slotProps?.baseTooltip,{children:u(C.slots.baseButton,e({ref:P,size:"small",startIcon:F,"aria-label":x.current.getLocaleText("toolbarDensityLabel"),"aria-haspopup":"menu","aria-expanded":T,"aria-controls":T?g:void 0,id:v},L,{onClick:e=>{S((e=>!e)),L.onClick?.(e)}},C.slotProps?.baseButton,{children:x.current.getLocaleText("toolbarDensity")}))})),u(i,{open:T,target:M.current,onClose:()=>{S(!1)},position:"bottom-start",children:u(j,{id:g,className:m.menuList,"aria-labelledby":v,onKeyDown:e=>{s(e.key)&&e.preventDefault(),n(e.key)&&S(!1)},autoFocusItem:T,children:G})})]})}));"production"!==process.env.NODE_ENV&&(I.propTypes={slotProps:o.object});export{I as GridToolbarDensitySelector};

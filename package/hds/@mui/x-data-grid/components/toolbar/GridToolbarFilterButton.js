import e from"../../../../@babel/runtime/helpers/esm/extends.js";import*as r from"react";import o from"../../../../prop-types/index.js";import{gridColumnLookupSelector as t}from"../../hooks/features/columns/gridColumnsSelector.js";import{useGridSelector as s}from"../../hooks/utils/useGridSelector.js";import{gridFilterActiveItemsSelector as l}from"../../hooks/features/filter/gridFilterSelector.js";import{gridPreferencePanelStateSelector as i}from"../../hooks/features/preferencesPanel/gridPreferencePanelSelector.js";import{GridPreferencePanelsValue as a}from"../../hooks/features/preferencesPanel/gridPreferencePanelsValue.js";import{useGridApiContext as n}from"../../hooks/utils/useGridApiContext.js";import{useGridRootProps as p}from"../../hooks/utils/useGridRootProps.js";import{getDataGridUtilityClass as c}from"../../constants/gridClasses.js";import{jsxs as u,jsx as m}from"react/jsx-runtime";import f from"../../../material/styles/styled.js";import d from"../../../utils/useId/useId.js";import g from"../../../material/Badge/Badge.js";import h from"../../../utils/composeClasses/composeClasses.js";import b from"../../../utils/capitalize/capitalize.js";const j=f("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(e,r)=>r.toolbarFilterList})((({theme:e})=>({margin:e.spacing(1,1,.5),padding:e.spacing(0,1)}))),P=r.forwardRef((function(o,f){const{slotProps:P={}}=o,T=P.button||{},x=P.tooltip||{},v=n(),F=p(),L=s(v,l),k=s(v,t),C=s(v,i),S=(e=>{const{classes:r}=e;return h({root:["toolbarFilterList"]},c,r)})(F),y=d(),B=d(),I=r.useMemo((()=>{if(C.open)return v.current.getLocaleText("toolbarFiltersTooltipHide");if(0===L.length)return v.current.getLocaleText("toolbarFiltersTooltipShow");const r=e=>k[e.field].filterOperators.find((r=>r.value===e.operator)).label||v.current.getLocaleText(`filterOperator${b(e.operator)}`).toString(),o=e=>{const{getValueAsString:r}=k[e.field].filterOperators.find((r=>r.value===e.operator));return r?r(e.value):e.value};return u("div",{children:[v.current.getLocaleText("toolbarFiltersTooltipActive")(L.length),m(j,{className:S.root,ownerState:F,children:L.map(((t,s)=>e({},k[t.field]&&m("li",{children:`${k[t.field].headerName||t.field}\n                  ${r(t)}\n                  ${null!=t.value?o(t):""}`},s))))})]})}),[v,F,C.open,L,k,S]);if(F.disableColumnFilter)return null;const w=C.open&&C.panelId===B;return m(F.slots.baseTooltip,e({title:I,enterDelay:1e3},x,F.slotProps?.baseTooltip,{children:m(F.slots.baseButton,e({ref:f,id:y,size:"small","aria-label":v.current.getLocaleText("toolbarFiltersLabel"),"aria-controls":w?B:void 0,"aria-expanded":w,"aria-haspopup":!0,startIcon:m(g,{badgeContent:L.length,color:"primary",children:m(F.slots.openFilterButtonIcon,{})})},T,{onClick:e=>{const{open:r,openedPanelValue:o}=C;r&&o===a.filters?v.current.hidePreferences():v.current.showPreferences(a.filters,B,y),T.onClick?.(e)}},F.slotProps?.baseButton,{children:v.current.getLocaleText("toolbarFilters")}))}))}));"production"!==process.env.NODE_ENV&&(P.propTypes={slotProps:o.object});export{P as GridToolbarFilterButton};

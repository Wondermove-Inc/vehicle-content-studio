import e from"../../../../@babel/runtime/helpers/esm/extends.js";import*as o from"react";import{getDataGridUtilityClass as r}from"../../constants/gridClasses.js";import{useGridRootProps as t}from"../../hooks/utils/useGridRootProps.js";import{gridColumnGroupsLookupSelector as n}from"../../hooks/features/columnGrouping/gridColumnGroupsSelector.js";import{useGridApiContext as s}from"../../hooks/utils/useGridApiContext.js";import{useGridSelector as l}from"../../hooks/utils/useGridSelector.js";import{GridGenericColumnHeaderItem as i}from"./GridGenericColumnHeaderItem.js";import{isEventTargetInPortal as a}from"../../utils/domUtils.js";import{shouldCellShowLeftBorder as u,shouldCellShowRightBorder as d}from"../../utils/cellBorderUtils.js";import{jsx as m}from"react/jsx-runtime";import c from"../../../utils/useId/useId.js";import p from"../../../utils/composeClasses/composeClasses.js";function h(h){const{groupId:g,width:f,depth:C,maxDepth:H,fields:I,height:B,colIndex:j,hasFocus:w,tabIndex:x,isLastColumn:G,pinnedPosition:b,style:y,indexInSection:D,sectionLength:L,gridHasFiller:R}=h,N=t(),k=o.useRef(null),F=s(),A=l(F,n),M=g?A[g]:{},{headerName:S=g??"",description:P="",headerAlign:T}=M;let v;const z=g&&A[g]?.renderHeaderGroup,E=o.useMemo((()=>({groupId:g,headerName:S,description:P,depth:C,maxDepth:H,fields:I,colIndex:j,isLastColumn:G})),[g,S,P,C,H,I,j,G]);g&&z&&(v=z(E));const K=u(b,D),U=d(b,D,L,N.showCellVerticalBorder,R),$=e({},h,{classes:N.classes,showLeftBorder:K,showRightBorder:U,headerAlign:T,depth:C,isDragging:!1}),q=S??g,O=c(),V=null===g?`empty-group-cell-${O}`:g,J=(e=>{const{classes:o,headerAlign:t,isDragging:n,showLeftBorder:s,showRightBorder:l,groupId:i,pinnedPosition:a}=e;return p({root:["columnHeader","left"===t&&"columnHeader--alignLeft","center"===t&&"columnHeader--alignCenter","right"===t&&"columnHeader--alignRight",n&&"columnHeader--moving",l&&"columnHeader--withRightBorder",s&&"columnHeader--withLeftBorder","withBorderColor",null===i?"columnHeader--emptyGroup":"columnHeader--filledGroup","left"===a&&"columnHeader--pinnedLeft","right"===a&&"columnHeader--pinnedRight"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer","withBorderColor"],titleContainerContent:["columnHeaderTitleContainerContent"]},r,o)})($);o.useLayoutEffect((()=>{if(w){const e=k.current.querySelector('[tabindex="0"]')||k.current;e?.focus()}}),[F,w]);const Q=o.useCallback((e=>o=>{a(o)||F.current.publishEvent(e,E,o)}),[F,E]),W=o.useMemo((()=>({onKeyDown:Q("columnGroupHeaderKeyDown"),onFocus:Q("columnGroupHeaderFocus"),onBlur:Q("columnGroupHeaderBlur")})),[Q]),X="function"==typeof M.headerClassName?M.headerClassName(E):M.headerClassName;return m(i,e({ref:k,classes:J,columnMenuOpen:!1,colIndex:j,height:B,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:x,isDraggable:!1,headerComponent:v,headerClassName:X,description:P,elementId:V,width:f,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:q,"aria-colspan":I.length,"data-fields":`|-${I.join("-|-")}-|`,style:y},W))}export{h as GridColumnGroupHeader};

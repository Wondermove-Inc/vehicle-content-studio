import e from"../../../../@babel/runtime/helpers/esm/extends.js";import*as o from"react";import r from"../../../../prop-types/index.js";import{gridPreferencePanelStateSelector as s}from"../../hooks/features/preferencesPanel/gridPreferencePanelSelector.js";import{GridPreferencePanelsValue as t}from"../../hooks/features/preferencesPanel/gridPreferencePanelsValue.js";import{useGridApiContext as l}from"../../hooks/utils/useGridApiContext.js";import{getDataGridUtilityClass as n}from"../../constants/gridClasses.js";import{useGridRootProps as i}from"../../hooks/utils/useGridRootProps.js";import{GridIconButtonContainer as a}from"./GridIconButtonContainer.js";import{jsx as c,jsxs as u}from"react/jsx-runtime";import p from"../../../utils/useId/useId.js";import m from"../../../material/Badge/Badge.js";import d from"../../../utils/composeClasses/composeClasses.js";import{useGridSelector as f}from"../../hooks/utils/useGridSelector.js";function P(r){const{counter:P,field:b,onClick:h}=r,j=l(),g=i(),C=(e=>{const{classes:o}=e;return d({icon:["filterIcon"]},n,o)})(e({},r,{classes:g.classes})),k=f(j,s),x=p(),I=p(),T=o.useCallback((e=>{e.preventDefault(),e.stopPropagation();const{open:o,openedPanelValue:r}=s(j.current.state);o&&r===t.filters?j.current.hideFilterPanel():j.current.showFilterPanel(void 0,I,x),h&&h(j.current.getColumnHeaderParams(b),e)}),[j,b,h,I,x]);if(!P)return null;const v=k.open&&k.labelId===x,B=c(g.slots.baseIconButton,e({id:x,onClick:T,color:"default","aria-label":j.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,"aria-haspopup":"menu","aria-expanded":v,"aria-controls":v?I:void 0},g.slotProps?.baseIconButton,{children:c(g.slots.columnFilteredIcon,{className:C.icon,fontSize:"small"})}));return c(g.slots.baseTooltip,e({title:j.current.getLocaleText("columnHeaderFiltersTooltipActive")(P),enterDelay:1e3},g.slotProps?.baseTooltip,{children:u(a,{children:[P>1&&c(m,{badgeContent:P,color:"default",children:B}),1===P&&B]})}))}"production"!==process.env.NODE_ENV&&(P.propTypes={counter:r.number,field:r.string.isRequired,onClick:r.func});export{P as GridColumnHeaderFilterIconButton};

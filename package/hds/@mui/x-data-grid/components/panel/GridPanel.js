import e from"../../../../@babel/runtime/helpers/esm/extends.js";import r from"../../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import*as o from"react";import t from"../../../../prop-types/index.js";import{clsx as s}from"../../node_modules/clsx/dist/clsx.js";import{useGridApiContext as a}from"../../hooks/utils/useGridApiContext.js";import{isEscapeKey as i}from"../../utils/keyboardUtils.js";import{useGridRootProps as l}from"../../hooks/utils/useGridRootProps.js";import{jsx as n}from"react/jsx-runtime";import m from"../../../utils/generateUtilityClasses/generateUtilityClasses.js";import p from"../../../material/styles/styled.js";import c from"../../../material/Popper/Popper.js";import d from"../../../material/Paper/Paper.js";import{ClickAwayListener as u}from"../../../base/ClickAwayListener/ClickAwayListener.js";const f=["children","className","classes"],h=m("MuiDataGrid",["panel","paper"]),b=p(c,{name:"MuiDataGrid",slot:"Panel",overridesResolver:(e,r)=>r.panel})((({theme:e})=>({zIndex:e.zIndex.modal}))),j=p(d,{name:"MuiDataGrid",slot:"Paper",overridesResolver:(e,r)=>r.paper})((({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,minWidth:300,maxHeight:450,display:"flex",maxWidth:`calc(100vw - ${e.spacing(.5)})`,overflow:"auto"}))),y=o.forwardRef(((t,m)=>{const{children:p,className:c}=t,d=r(t,f),y=a(),x=l(),P=h,[k,v]=o.useState(!1),w=o.useCallback((()=>{y.current.hidePreferences()}),[y]),C=o.useCallback((e=>{i(e.key)&&y.current.hidePreferences()}),[y]),g=o.useMemo((()=>[{name:"flip",enabled:!1},{name:"isPlaced",enabled:!0,phase:"main",fn:()=>{v(!0)},effect:()=>()=>{v(!1)}}]),[]),[E,N]=o.useState(null);return o.useEffect((()=>{const e=y.current.rootElementRef?.current?.querySelector('[data-id="gridPanelAnchor"]');e&&N(e)}),[y]),E?n(b,e({ref:m,placement:"bottom-start",className:s(c,P.panel),ownerState:x,anchorEl:E,modifiers:g},d,{children:n(u,{mouseEvent:"onMouseUp",onClickAway:w,children:n(j,{className:P.paper,ownerState:x,elevation:8,onKeyDown:C,children:k&&p})})})):null}));"production"!==process.env.NODE_ENV&&(y.propTypes={children:t.node,classes:t.object,open:t.bool.isRequired,ownerState:t.object});export{y as GridPanel,h as gridPanelClasses};

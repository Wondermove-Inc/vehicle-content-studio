import e from"../../../../../@babel/runtime/helpers/esm/extends.js";import t from"../../../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import*as r from"react";import o from"../../../../../prop-types/index.js";import{isSingleSelectColDef as l,getValueOptions as s}from"./filterPanelUtils.js";import{useGridRootProps as i}from"../../../hooks/utils/useGridRootProps.js";import{jsx as a}from"react/jsx-runtime";import n from"../../../../utils/useId/useId.js";import p from"../../../../material/Autocomplete/Autocomplete.js";import{createFilterOptions as u}from"../../../../base/useAutocomplete/useAutocomplete.js";const m=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"],c=["key"],f=u();function d(o){const{item:u,applyValue:d,apiRef:b,focusElementRef:h,color:y,error:R,helperText:g,size:j,variant:x="standard"}=o,T=t(o,m),v={color:y,error:R,helperText:g,size:j,variant:x},O=n(),P=i();let L=null;if(u.field){const e=b.current.getColumn(u.field);l(e)&&(L=e)}const q=L?.getOptionValue,I=L?.getOptionLabel,k=r.useCallback(((e,t)=>q(e)===q(t)),[q]),A=r.useMemo((()=>s(L)||[]),[L]),E=r.useMemo((()=>Array.isArray(u.value)?u.value.reduce(((e,t)=>{const r=A.find((e=>q(e)===t));return null!=r&&e.push(r),e}),[]):[]),[q,u.value,A]),V=r.useCallback(((t,r)=>{d(e({},u,{value:r.map(q)}))}),[d,u,q]);return a(p,e({multiple:!0,options:A,isOptionEqualToValue:k,filterOptions:f,id:O,value:E,onChange:V,getOptionLabel:I,renderTags:(r,o)=>r.map(((r,l)=>{const s=o({index:l}),{key:i}=s,n=t(s,c);return a(P.slots.baseChip,e({variant:"outlined",size:"small",label:I(r)},n),i)})),renderInput:t=>a(P.slots.baseTextField,e({},t,{label:b.current.getLocaleText("filterPanelInputLabel"),placeholder:b.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:e({},t.InputLabelProps,{shrink:!0}),inputRef:h,type:"singleSelect"},v,P.slotProps?.baseTextField))},T))}"production"!==process.env.NODE_ENV&&(d.propTypes={apiRef:o.shape({current:o.object.isRequired}).isRequired,applyValue:o.func.isRequired,focusElementRef:o.oneOfType([o.func,o.object]),item:o.shape({field:o.string.isRequired,id:o.oneOfType([o.number,o.string]),operator:o.string.isRequired,value:o.any}).isRequired,type:o.oneOf(["singleSelect"])});export{d as GridFilterInputMultipleSingleSelect};

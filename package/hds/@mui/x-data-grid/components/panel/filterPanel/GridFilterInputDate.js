import e from"../../../../../@babel/runtime/helpers/esm/extends.js";import t from"../../../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import*as r from"react";import s from"../../../../../prop-types/index.js";import{useGridRootProps as o}from"../../../hooks/utils/useGridRootProps.js";import{jsx as i}from"react/jsx-runtime";import n from"../../../../utils/useTimeout/useTimeout.js";import u from"../../../../utils/useId/useId.js";const a=["item","applyValue","type","apiRef","focusElementRef","InputProps","isFilterActive","clearButton","tabIndex","disabled"];function l(e,t){if(null==e)return"";const r=new Date(e);return Number.isNaN(r.getTime())?"":"date"===t?r.toISOString().substring(0,10):"datetime-local"===t?(r.setMinutes(r.getMinutes()-r.getTimezoneOffset()),r.toISOString().substring(0,19)):r.toISOString().substring(0,10)}function p(s){const{item:p,applyValue:c,type:m,apiRef:d,focusElementRef:f,InputProps:b,clearButton:g,tabIndex:I,disabled:R}=s,x=t(s,a),T=n(),[v,P]=r.useState((()=>l(p.value,m))),[h,y]=r.useState(!1),j=u(),S=o(),N=r.useCallback((t=>{T.clear();const r=t.target.value;P(r),y(!0),T.start(S.filterDebounceMs,(()=>{const t=new Date(r);c(e({},p,{value:Number.isNaN(t.getTime())?void 0:t})),y(!1)}))}),[c,p,S.filterDebounceMs,T]);return r.useEffect((()=>{const e=l(p.value,m);P(e)}),[p.value,m]),i(S.slots.baseTextField,e({fullWidth:!0,id:j,label:d.current.getLocaleText("filterPanelInputLabel"),placeholder:d.current.getLocaleText("filterPanelInputPlaceholder"),value:v,onChange:N,variant:"standard",type:m||"text",InputLabelProps:{shrink:!0},inputRef:f,InputProps:e({},h||g?{endAdornment:h?i(S.slots.loadIcon,{fontSize:"small",color:"action"}):g}:{},{disabled:R},b,{inputProps:e({max:"datetime-local"===m?"9999-12-31T23:59":"9999-12-31",tabIndex:I},b?.inputProps)})},x,S.slotProps?.baseTextField))}"production"!==process.env.NODE_ENV&&(p.propTypes={apiRef:s.shape({current:s.object.isRequired}).isRequired,applyValue:s.func.isRequired,clearButton:s.node,focusElementRef:s.oneOfType([s.func,s.object]),isFilterActive:s.bool,item:s.shape({field:s.string.isRequired,id:s.oneOfType([s.number,s.string]),operator:s.string.isRequired,value:s.any}).isRequired});export{p as GridFilterInputDate};

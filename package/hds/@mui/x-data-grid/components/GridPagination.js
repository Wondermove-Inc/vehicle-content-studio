import e from"../../../@babel/runtime/helpers/esm/extends.js";import*as o from"react";import t from"../../../prop-types/index.js";import{useGridSelector as a}from"../hooks/utils/useGridSelector.js";import{useGridApiContext as i}from"../hooks/utils/useGridApiContext.js";import{useGridRootProps as n}from"../hooks/utils/useGridRootProps.js";import{gridPaginationModelSelector as r,gridPaginationRowCountSelector as s,gridPageCountSelector as p}from"../hooks/features/pagination/gridPaginationSelector.js";import{jsx as l}from"react/jsx-runtime";import m from"../../material/styles/styled.js";import u from"../../material/TablePagination/TablePagination.js";import g from"../../material/TablePagination/tablePaginationClasses.js";const c=m(u)((({theme:e})=>({[`& .${g.selectLabel}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"block"}},[`& .${g.input}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"inline-flex"}}}))),d=({from:e,to:o,count:t,estimated:a})=>a?`${e}–${o} of ${-1!==t?t:`more than ${a>o?a:o}`}`:`${e}–${o} of ${-1!==t?t:`more than ${o}`}`,f=o.forwardRef((function(t,m){const u=i(),g=n(),f=a(u,r),b=a(u,s),P=a(u,p),{paginationMode:h,loading:S,estimatedRowCount:y}=g,z=o.useMemo((()=>-1===b&&"server"===h&&S?{backIconButtonProps:{disabled:!0},nextIconButtonProps:{disabled:!0}}:{}),[S,h,b]),j=o.useMemo((()=>Math.max(0,P-1)),[P]),$=o.useMemo((()=>-1===b||f.page<=j?f.page:j),[j,f.page,b]),k=o.useCallback((e=>{const o=Number(e.target.value);u.current.setPageSize(o)}),[u]),w=o.useCallback(((e,o)=>{u.current.setPage(o)}),[u]),x=e=>{for(let o=0;o<g.pageSizeOptions.length;o+=1){const t=g.pageSizeOptions[o];if("number"==typeof t){if(t===e)return!0}else if(t.value===e)return!0}return!1};if("production"!==process.env.NODE_ENV){const e=o.useRef(!1),t=g.paginationModel?.pageSize??f.pageSize;e.current||g.autoPageSize||x(t)||(console.warn([`MUI X: The page size \`${f.pageSize}\` is not present in the \`pageSizeOptions\`.`,"Add it to show the pagination select."].join("\n")),e.current=!0)}const M=x(f.pageSize)?g.pageSizeOptions:[],T=u.current.getLocaleText("MuiTablePagination"),v=(C=T.labelDisplayedRows||d,O=y,({from:e,to:o,count:t,page:a})=>C({from:e,to:o,count:t,page:a,estimated:O}));var C,O;return l(c,e({ref:m,component:"div",count:b,page:$,rowsPerPageOptions:M,rowsPerPage:f.pageSize,onPageChange:w,onRowsPerPageChange:k},z,T,{labelDisplayedRows:v},t))}));"production"!==process.env.NODE_ENV&&(f.propTypes={component:t.elementType});export{f as GridPagination};

import*as t from"react";import{buildWarning as e}from"../../utils/warning.js";import{fastObjectShallowCompare as r}from"../../utils/fastObjectShallowCompare.js";import s from"../../../utils/useLazyRef/useLazyRef.js";import n from"../../../utils/useOnMount/useOnMount.js";const u=e(["MUI X: `useGridSelector` has been called before the initialization of the state.","This hook can only be used inside the context of the grid."]);function o(t,e){return function(t){return t.acceptsApiRef}(e)?e(t):e(t.current.state)}const c=Object.is,l=r,i=()=>({state:null,equals:null,selector:null}),a=(e,r,l=c)=>{"production"!==process.env.NODE_ENV&&(e.current.state||u());const a=s(i),f=null!==a.current.selector,[m,p]=t.useState(f?null:o(e,r));return a.current.state=m,a.current.equals=l,a.current.selector=r,n((()=>e.current.store.subscribe((()=>{const t=o(e,a.current.selector);a.current.equals(a.current.state,t)||(a.current.state=t,p(t))})))),m};export{l as objectShallowCompare,a as useGridSelector};

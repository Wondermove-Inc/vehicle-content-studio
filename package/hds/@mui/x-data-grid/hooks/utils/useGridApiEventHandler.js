import*as r from"react";import{TimerBasedCleanupTracking as e}from"../../utils/cleanupTracking/TimerBasedCleanupTracking.js";import{FinalizationRegistryBasedCleanupTracking as n}from"../../utils/cleanupTracking/FinalizationRegistryBasedCleanupTracking.js";var t=function(r){return r.DataGrid="DataGrid",r.DataGridPro="DataGridPro",r}(t||{});class u{}function c(t){let c=0;return function(i,s,l,a){null===t.registry&&(t.registry="undefined"!=typeof FinalizationRegistry?new n:new e);const[o]=r.useState(new u),f=r.useRef(null),g=r.useRef();g.current=l;const d=r.useRef(null);if(!f.current&&g.current){const r=(r,e,n)=>{e.defaultMuiPrevented||g.current?.(r,e,n)};f.current=i.current.subscribeEvent(s,r,a),c+=1,d.current={cleanupToken:c},t.registry.register(o,(()=>{f.current?.(),f.current=null,d.current=null}),d.current)}else!g.current&&f.current&&(f.current(),f.current=null,d.current&&(t.registry.unregister(d.current),d.current=null));r.useEffect((()=>{if(!f.current&&g.current){const r=(r,e,n)=>{e.defaultMuiPrevented||g.current?.(r,e,n)};f.current=i.current.subscribeEvent(s,r,a)}return d.current&&t.registry&&(t.registry.unregister(d.current),d.current=null),()=>{f.current?.(),f.current=null}}),[i,s,a])}}const i=c({registry:null}),s={isFirst:!0};function l(r,e,n){i(r,e,n,s)}export{t as GridSignature,c as createUseGridApiEventHandler,i as useGridApiEventHandler,l as useGridApiOptionHandler};

import{isLeaf as l}from"../../../models/gridColumnGrouping.js";import{isDeepEqual as e}from"../../../utils/utils.js";const o=(e,i,n)=>{if(l(e)){if(void 0!==n[e.field])throw new Error(["MUI X: columnGroupingModel contains duplicated field",`column field ${e.field} occurs two times in the grouping model:`,`- ${n[e.field].join(" > ")}`,`- ${i.join(" > ")}`].join("\n"));return void(n[e.field]=i)}const{groupId:r,children:t}=e;t.forEach((l=>{o(l,[...i,r],n)}))},i=l=>{if(!l)return{};const e={};return l.forEach((l=>{o(l,[],e)})),e},n=(l,o,i)=>{const n=l=>o[l]??[],r=[],t=Math.max(...l.map((l=>n(l).length))),u=(l,o,i)=>e(n(l).slice(0,i+1),n(o).slice(0,i+1));for(let e=0;e<t;e+=1){const o=l.reduce(((l,o)=>{const r=n(o)[e]??null;if(0===l.length)return[{columnFields:[o],groupId:r}];const t=l[l.length-1],d=t.columnFields[t.columnFields.length-1];return t.groupId!==r||!u(d,o,e)||(c=d,s=o,i?.left&&i.left.includes(c)&&!i.left.includes(s)||i?.right&&!i.right.includes(c)&&i.right.includes(s))?[...l,{columnFields:[o],groupId:r}]:[...l.slice(0,l.length-1),{columnFields:[...t.columnFields,o],groupId:r}];var c,s}),[]);r.push(o)}return r};export{n as getColumnGroupsHeaderStructure,i as unwrapGroupingColumnModel};

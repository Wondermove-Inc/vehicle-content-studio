import*as e from"react";import{getGridColumnHeaderElement as t,getGridRowElement as r,getGridCellElement as l}from"../../../utils/domUtils.js";import{useGridApiMethod as o}from"../../utils/useGridApiMethod.js";import{gridFocusCellSelector as u,gridTabIndexCellSelector as n}from"../focus/gridFocusStateSelector.js";class a extends Error{}function c(c){const i=e.useCallback((e=>({field:e,colDef:c.current.getColumn(e)})),[c]),s=e.useCallback((e=>{const t=c.current.getRow(e);if(!t)throw new a(`No row with id #${e} found`);return{id:e,columns:c.current.getAllColumns(),row:t}}),[c]),d=e.useCallback(((e,t)=>{const r=c.current.getColumn(t),l=c.current.getRow(e),o=c.current.getRowNode(e);if(!l||!o)throw new a(`No row with id #${e} found`);const i=l[t],s=r?.valueGetter?r.valueGetter(i,l,r,c):i,d=u(c),m=n(c),f={id:e,field:t,row:l,rowNode:o,colDef:r,cellMode:c.current.getCellMode(e,t),hasFocus:null!==d&&d.field===t&&d.id===e,tabIndex:m&&m.field===t&&m.id===e?0:-1,value:s,formattedValue:s,isEditable:!1};return r&&r.valueFormatter&&(f.formattedValue=r.valueFormatter(s,l,r,c)),f.isEditable=r&&c.current.isCellEditable(f),f}),[c]),m=e.useCallback(((e,t)=>{const r=c.current.getColumn(t),l=c.current.getRow(e);if(!l)throw new a(`No row with id #${e} found`);return r&&r.valueGetter?r.valueGetter(l[r.field],l,r,c):l[t]}),[c]),f=e.useCallback(((e,t)=>{const r=t.field;if(!t||!t.valueGetter)return e[r];const l=e[t.field];return t.valueGetter(l,e,t,c)}),[c]),w=e.useCallback(((e,t)=>{const r=f(e,t);return t&&t.valueFormatter?t.valueFormatter(r,e,t,c):r}),[c,f]),C=e.useCallback((e=>c.current.rootElementRef.current?t(c.current.rootElementRef.current,e):null),[c]),g=e.useCallback((e=>c.current.rootElementRef.current?r(c.current.rootElementRef.current,e):null),[c]),b=e.useCallback(((e,t)=>c.current.rootElementRef.current?l(c.current.rootElementRef.current,{id:e,field:t}):null),[c]);o(c,{getCellValue:m,getCellParams:d,getCellElement:b,getRowValue:f,getRowFormattedValue:w,getRowParams:s,getRowElement:g,getColumnHeaderParams:i,getColumnHeaderElement:C},"public")}export{a as MissingRowIdError,c as useGridParamsApi};

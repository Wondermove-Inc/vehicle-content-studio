"use client";
import*as e from"react";import t from"../useThemeWithoutDefault.js";import n from"../useThemeProps/getThemeProps.js";import r from"../../../utils/useEnhancedEffect/useEnhancedEffect.js";function o(t,n,o,s,u){const[i,a]=e.useState((()=>u&&o?o(t).matches:s?s(t).matches:n));return r((()=>{let e=!0;if(!o)return;const n=o(t),r=()=>{e&&a(n.matches)};return r(),n.addListener(r),()=>{e=!1,n.removeListener(r)}}),[t,o]),i}const s=e.useSyncExternalStore;function u(t,n,r,o,u){const i=e.useCallback((()=>n),[n]),a=e.useMemo((()=>{if(u&&r)return()=>r(t).matches;if(null!==o){const{matches:e}=o(t);return()=>e}return i}),[i,t,o,u,r]),[c,m]=e.useMemo((()=>{if(null===r)return[i,()=>()=>{}];const e=r(t);return[()=>e.matches,t=>(e.addListener(t),()=>{e.removeListener(t)})]}),[i,r,t]);return s(m,c,a)}function i(r,i={}){const a=t(),c="undefined"!=typeof window&&void 0!==window.matchMedia,{defaultMatches:m=!1,matchMedia:d=(c?window.matchMedia:null),ssrMatchMedia:f=null,noSsr:h=!1}=n({name:"MuiUseMediaQuery",props:i,theme:a});"production"!==process.env.NODE_ENV&&"function"==typeof r&&null===a&&console.error(["MUI: The `query` argument provided is invalid.","You are providing a function without a theme in the context.","One of the parent elements needs to use a ThemeProvider."].join("\n"));let l="function"==typeof r?r(a):r;l=l.replace(/^@media( ?)/m,"");const p=(void 0!==s?u:o)(l,m,d,f,h);return"production"!==process.env.NODE_ENV&&e.useDebugValue({query:l,match:p}),p}export{i as default};

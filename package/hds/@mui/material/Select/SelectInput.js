"use client";
import e from"../../../@babel/runtime/helpers/esm/extends.js";import o from"../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import*as r from"react";import{r as t}from"../../../react-is/index.js";import n from"../../../prop-types/index.js";import{clsx as l}from"../../../clsx/dist/clsx.js";import a from"../Menu/Menu.js";import{nativeSelectSelectStyles as s,nativeSelectIconStyles as i}from"../NativeSelect/NativeSelectInput.js";import{isFilled as u}from"../InputBase/utils.js";import p from"../styles/styled.js";import c,{getSelectUtilityClasses as d}from"./selectClasses.js";import{jsxs as m,jsx as f}from"react/jsx-runtime";import v from"../../utils/capitalize/capitalize.js";import b from"../styles/slotShouldForwardProp.js";import h from"../../utils/useControlled/useControlled.js";import y from"../../utils/useForkRef/useForkRef.js";import g from"../../utils/ownerDocument/ownerDocument.js";import j from"../../utils/formatMuiErrorMessage/formatMuiErrorMessage.js";import w from"../../utils/useId/useId.js";import E from"../../utils/refType/refType.js";import I from"../../utils/composeClasses/composeClasses.js";var S;const C=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],O=p("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[{[`&.${c.select}`]:o.select},{[`&.${c.select}`]:o[r.variant]},{[`&.${c.error}`]:o.error},{[`&.${c.multiple}`]:o.multiple}]}})(s,{[`&.${c.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),x=p("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.icon,r.variant&&o[`icon${v(r.variant)}`],r.open&&o.iconOpen]}})(i),N=p("input",{shouldForwardProp:e=>b(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,o)=>o.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function M(e,o){return"object"==typeof o&&null!==o?e===o:String(e)===String(o)}function P(e){return null==e||"string"==typeof e&&!e.trim()}const D=r.forwardRef((function(n,s){var i;const{"aria-describedby":p,"aria-label":c,autoFocus:b,autoWidth:E,children:D,className:F,defaultOpen:$,defaultValue:R,disabled:V,displayEmpty:k,error:A=!1,IconComponent:T,inputRef:W,labelId:B,MenuProps:U={},multiple:L,name:z,onBlur:K,onChange:_,onClose:H,onFocus:q,onOpen:Y,open:G,readOnly:J,renderValue:Q,SelectDisplayProps:X={},tabIndex:Z,value:ee,variant:oe="standard"}=n,re=o(n,C),[te,ne]=h({controlled:ee,default:R,name:"Select"}),[le,ae]=h({controlled:G,default:$,name:"Select"}),se=r.useRef(null),ie=r.useRef(null),[ue,pe]=r.useState(null),{current:ce}=r.useRef(null!=G),[de,me]=r.useState(),fe=y(s,W),ve=r.useCallback((e=>{ie.current=e,e&&pe(e)}),[]),be=null==ue?void 0:ue.parentNode;r.useImperativeHandle(fe,(()=>({focus:()=>{ie.current.focus()},node:se.current,value:te})),[te]),r.useEffect((()=>{$&&le&&ue&&!ce&&(me(E?null:be.clientWidth),ie.current.focus())}),[ue,E]),r.useEffect((()=>{b&&ie.current.focus()}),[b]),r.useEffect((()=>{if(!B)return;const e=g(ie.current).getElementById(B);if(e){const o=()=>{getSelection().isCollapsed&&ie.current.focus()};return e.addEventListener("click",o),()=>{e.removeEventListener("click",o)}}}),[B]);const he=(e,o)=>{e?Y&&Y(o):H&&H(o),ce||(me(E?null:be.clientWidth),ae(e))},ye=r.Children.toArray(D),ge=e=>o=>{let r;if(o.currentTarget.hasAttribute("tabindex")){if(L){r=Array.isArray(te)?te.slice():[];const o=te.indexOf(e.props.value);-1===o?r.push(e.props.value):r.splice(o,1)}else r=e.props.value;if(e.props.onClick&&e.props.onClick(o),te!==r&&(ne(r),_)){const t=o.nativeEvent||o,n=new t.constructor(t.type,t);Object.defineProperty(n,"target",{writable:!0,value:{value:r,name:z}}),_(n,e)}L||he(!1,o)}},je=null!==ue&&le;let we,Ee;delete re["aria-invalid"];const Ie=[];let Se=!1,Ce=!1;(u({value:te})||k)&&(Q?we=Q(te):Se=!0);const Oe=ye.map((e=>{if(!r.isValidElement(e))return null;let o;if("production"!==process.env.NODE_ENV&&t.isFragment(e)&&console.error(["MUI: The Select component doesn't accept a Fragment as a child.","Consider providing an array instead."].join("\n")),L){if(!Array.isArray(te))throw new Error("production"!==process.env.NODE_ENV?"MUI: The `value` prop must be an array when using the `Select` component with `multiple`.":j(2));o=te.some((o=>M(o,e.props.value))),o&&Se&&Ie.push(e.props.children)}else o=M(te,e.props.value),o&&Se&&(Ee=e.props.children);return o&&(Ce=!0),r.cloneElement(e,{"aria-selected":o?"true":"false",onClick:ge(e),onKeyUp:o=>{" "===o.key&&o.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(o)},role:"option",selected:o,value:void 0,"data-value":e.props.value})}));"production"!==process.env.NODE_ENV&&r.useEffect((()=>{if(!Ce&&!L&&""!==te){const e=ye.map((e=>e.props.value));console.warn([`MUI: You have provided an out-of-range value \`${te}\` for the select ${z?`(name="${z}") `:""}component.`,"Consider providing a value that matches one of the available options or ''.",`The available values are ${e.filter((e=>null!=e)).map((e=>`\`${e}\``)).join(", ")||'""'}.`].join("\n"))}}),[Ce,ye,L,z,te]),Se&&(we=L?0===Ie.length?null:Ie.reduce(((e,o,r)=>(e.push(o),r<Ie.length-1&&e.push(", "),e)),[]):Ee);let xe,Ne=de;!E&&ce&&ue&&(Ne=be.clientWidth),xe=void 0!==Z?Z:V?null:0;const Me=X.id||(z?`mui-component-select-${z}`:void 0),Pe=e({},n,{variant:oe,value:te,open:je,error:A}),De=(e=>{const{classes:o,variant:r,disabled:t,multiple:n,open:l,error:a}=e,s={select:["select",r,t&&"disabled",n&&"multiple",a&&"error"],icon:["icon",`icon${v(r)}`,l&&"iconOpen",t&&"disabled"],nativeInput:["nativeInput"]};return I(s,d,o)})(Pe),Fe=e({},U.PaperProps,null==(i=U.slotProps)?void 0:i.paper),$e=w();return m(r.Fragment,{children:[f(O,e({ref:ve,tabIndex:xe,role:"combobox","aria-controls":$e,"aria-disabled":V?"true":void 0,"aria-expanded":je?"true":"false","aria-haspopup":"listbox","aria-label":c,"aria-labelledby":[B,Me].filter(Boolean).join(" ")||void 0,"aria-describedby":p,onKeyDown:e=>{if(!J){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),he(!0,e))}},onMouseDown:V||J?null:e=>{0===e.button&&(e.preventDefault(),ie.current.focus(),he(!0,e))},onBlur:e=>{!je&&K&&(Object.defineProperty(e,"target",{writable:!0,value:{value:te,name:z}}),K(e))},onFocus:q},X,{ownerState:Pe,className:l(X.className,De.select,F),id:Me,children:P(we)?S||(S=f("span",{className:"notranslate",children:"â€‹"})):we})),f(N,e({"aria-invalid":A,value:Array.isArray(te)?te.join(","):te,name:z,ref:se,"aria-hidden":!0,onChange:e=>{const o=ye.find((o=>o.props.value===e.target.value));void 0!==o&&(ne(o.props.value),_&&_(e,o))},tabIndex:-1,disabled:V,className:De.nativeInput,autoFocus:b,ownerState:Pe},re)),f(x,{as:T,className:De.icon,ownerState:Pe}),f(a,e({id:`menu-${z||""}`,anchorEl:be,open:je,onClose:e=>{he(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},U,{MenuListProps:e({"aria-labelledby":B,role:"listbox","aria-multiselectable":L?"true":void 0,disableListWrap:!0,id:$e},U.MenuListProps),slotProps:e({},U.slotProps,{paper:e({},Fe,{style:e({minWidth:Ne},null!=Fe?Fe.style:null)})}),children:Oe}))]})}));"production"!==process.env.NODE_ENV&&(D.propTypes={"aria-describedby":n.string,"aria-label":n.string,autoFocus:n.bool,autoWidth:n.bool,children:n.node,classes:n.object,className:n.string,defaultOpen:n.bool,defaultValue:n.any,disabled:n.bool,displayEmpty:n.bool,error:n.bool,IconComponent:n.elementType.isRequired,inputRef:E,labelId:n.string,MenuProps:n.object,multiple:n.bool,name:n.string,onBlur:n.func,onChange:n.func,onClose:n.func,onFocus:n.func,onOpen:n.func,open:n.bool,readOnly:n.bool,renderValue:n.func,SelectDisplayProps:n.object,tabIndex:n.oneOfType([n.number,n.string]),type:n.any,value:n.any,variant:n.oneOf(["standard","outlined","filled"])});var F=D;export{F as default};

"use client";
import e from"../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import r from"../../../@babel/runtime/helpers/esm/extends.js";import*as o from"react";import t from"../../../prop-types/index.js";import{clsx as s}from"../../../clsx/dist/clsx.js";import{createUseThemeProps as a}from"../zero-styled/index.js";import l from"../internal/svg-icons/Person.js";import{getAvatarUtilityClass as n}from"./avatarClasses.js";import i from"../utils/useSlot.js";import{jsx as c}from"react/jsx-runtime";import p from"../styles/styled.js";import m from"../../utils/composeClasses/composeClasses.js";const d=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],f=a(),u=p("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[r.root,r[o.variant],o.colorDefault&&r.colorDefault]}})((({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:r({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:r({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]}))),g=p("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,r)=>r.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),v=p(l,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,r)=>r.fallback})({width:"75%",height:"75%"});const y=o.forwardRef((function(t,a){const l=f({props:t,name:"MuiAvatar"}),{alt:p,children:y,className:b,component:h="div",slots:j={},slotProps:S={},imgProps:x,sizes:P,src:k,srcSet:w,variant:R="circular"}=l,O=e(l,d);let T=null;const N=function({crossOrigin:e,referrerPolicy:r,src:t,srcSet:s}){const[a,l]=o.useState(!1);return o.useEffect((()=>{if(!t&&!s)return;l(!1);let o=!0;const a=new Image;return a.onload=()=>{o&&l("loaded")},a.onerror=()=>{o&&l("error")},a.crossOrigin=e,a.referrerPolicy=r,a.src=t,s&&(a.srcset=s),()=>{o=!1}}),[e,r,t,s]),a}(r({},x,{src:k,srcSet:w})),C=k||w,D=C&&"error"!==N,z=r({},l,{colorDefault:!D,component:h,variant:R}),A=(e=>{const{classes:r,variant:o,colorDefault:t}=e;return m({root:["root",o,t&&"colorDefault"],img:["img"],fallback:["fallback"]},n,r)})(z),[F,I]=i("img",{className:A.img,elementType:g,externalForwardedProps:{slots:j,slotProps:{img:r({},x,S.img)}},additionalProps:{alt:p,src:k,srcSet:w,sizes:P},ownerState:z});return T=D?c(F,r({},I)):y||0===y?y:C&&p?p[0]:c(v,{ownerState:z,className:A.fallback}),c(u,r({as:h,ownerState:z,className:s(A.root,b),ref:a},O,{children:T}))}));"production"!==process.env.NODE_ENV&&(y.propTypes={alt:t.string,children:t.node,classes:t.object,className:t.string,component:t.elementType,imgProps:t.object,sizes:t.string,slotProps:t.shape({img:t.oneOfType([t.func,t.object])}),slots:t.shape({img:t.elementType}),src:t.string,srcSet:t.string,sx:t.oneOfType([t.arrayOf(t.oneOfType([t.func,t.object,t.bool])),t.func,t.object]),variant:t.oneOfType([t.oneOf(["circular","rounded","square"]),t.string])});var b=y;export{b as default};

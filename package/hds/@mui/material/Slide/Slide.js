"use client";
import e from"../../../@babel/runtime/helpers/esm/extends.js";import t from"../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import*as n from"react";import r from"../../../prop-types/index.js";import o from"../styles/useTheme.js";import{reflow as i,getTransitionProps as s}from"../transitions/utils.js";import{jsx as a}from"react/jsx-runtime";import p from"../../utils/useForkRef/useForkRef.js";import l from"../../utils/debounce/debounce.js";import c from"../../utils/ownerWindow/ownerWindow.js";import u from"../../utils/elementAcceptingRef/elementAcceptingRef.js";import f from"../../utils/chainPropTypes/chainPropTypes.js";import m from"../../utils/HTMLElementType/HTMLElementType.js";import d from"../../../react-transition-group/esm/Transition.js";const g=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function E(e){return"function"==typeof e?e():e}function h(e,t,n){const r=function(e,t,n){const r=t.getBoundingClientRect(),o=n&&n.getBoundingClientRect(),i=c(t);let s;if(t.fakeTransform)s=t.fakeTransform;else{const e=i.getComputedStyle(t);s=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let a=0,p=0;if(s&&"none"!==s&&"string"==typeof s){const e=s.split("(")[1].split(")")[0].split(",");a=parseInt(e[4],10),p=parseInt(e[5],10)}return"left"===e?o?`translateX(${o.right+a-r.left}px)`:`translateX(${i.innerWidth+a-r.left}px)`:"right"===e?o?`translateX(-${r.right-o.left-a}px)`:`translateX(-${r.left+r.width-a}px)`:"up"===e?o?`translateY(${o.bottom+p-r.top}px)`:`translateY(${i.innerHeight+p-r.top}px)`:o?`translateY(-${r.top-o.top+r.height-p}px)`:`translateY(-${r.top+r.height-p}px)`}(e,t,E(n));r&&(t.style.webkitTransform=r,t.style.transform=r)}const y=n.forwardRef((function(r,u){const f=o(),m={enter:f.transitions.easing.easeOut,exit:f.transitions.easing.sharp},E={enter:f.transitions.duration.enteringScreen,exit:f.transitions.duration.leavingScreen},{addEndListener:y,appear:x=!0,children:b,container:T,direction:w="down",easing:j=m,in:k,onEnter:v,onEntered:R,onEntering:L,onExit:C,onExited:$,onExiting:O,style:M,timeout:I=E,TransitionComponent:P=d}=r,B=t(r,g),H=n.useRef(null),N=p(b.ref,H,u),V=e=>t=>{e&&(void 0===t?e(H.current):e(H.current,t))},W=V(((e,t)=>{h(w,e,T),i(e),v&&v(e,t)})),X=V(((t,n)=>{const r=s({timeout:I,style:M,easing:j},{mode:"enter"});t.style.webkitTransition=f.transitions.create("-webkit-transform",e({},r)),t.style.transition=f.transitions.create("transform",e({},r)),t.style.webkitTransform="none",t.style.transform="none",L&&L(t,n)})),Y=V(R),S=V(O),z=V((e=>{const t=s({timeout:I,style:M,easing:j},{mode:"exit"});e.style.webkitTransition=f.transitions.create("-webkit-transform",t),e.style.transition=f.transitions.create("transform",t),h(w,e,T),C&&C(e)})),A=V((e=>{e.style.webkitTransition="",e.style.transition="",$&&$(e)})),D=n.useCallback((()=>{H.current&&h(w,H.current,T)}),[w,T]);return n.useEffect((()=>{if(k||"down"===w||"right"===w)return;const e=l((()=>{H.current&&h(w,H.current,T)})),t=c(H.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[w,k,T]),n.useEffect((()=>{k||D()}),[k,D]),a(P,e({nodeRef:H,onEnter:W,onEntered:Y,onEntering:X,onExit:z,onExited:A,onExiting:S,addEndListener:e=>{y&&y(H.current,e)},appear:x,in:k,timeout:I},B,{children:(t,r)=>n.cloneElement(b,e({ref:N,style:e({visibility:"exited"!==t||k?void 0:"hidden"},M,b.props.style)},r))}))}));"production"!==process.env.NODE_ENV&&(y.propTypes={addEndListener:r.func,appear:r.bool,children:u.isRequired,container:f(r.oneOfType([m,r.func]),(e=>{if(e.open){const t=E(e.container);if(t&&1===t.nodeType){const e=t.getBoundingClientRect();if("test"!==process.env.NODE_ENV&&0===e.top&&0===e.left&&0===e.right&&0===e.bottom)return new Error(["MUI: The `container` prop provided to the component is invalid.","The anchor element should be part of the document layout.","Make sure the element is present in the document or that it's not display none."].join("\n"))}else if(!t||"function"!=typeof t.getBoundingClientRect||null!=t.contextElement&&1!==t.contextElement.nodeType)return new Error(["MUI: The `container` prop provided to the component is invalid.","It should be an HTML element instance."].join("\n"))}return null})),direction:r.oneOf(["down","left","right","up"]),easing:r.oneOfType([r.shape({enter:r.string,exit:r.string}),r.string]),in:r.bool,onEnter:r.func,onEntered:r.func,onEntering:r.func,onExit:r.func,onExited:r.func,onExiting:r.func,style:r.object,timeout:r.oneOfType([r.number,r.shape({appear:r.number,enter:r.number,exit:r.number})])});var x=y;export{x as default,h as setTranslateValue};

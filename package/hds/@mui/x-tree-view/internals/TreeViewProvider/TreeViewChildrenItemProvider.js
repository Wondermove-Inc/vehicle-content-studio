import*as e from"react";import r from"../../../../prop-types/index.js";import{useTreeViewContext as t}from"./useTreeViewContext.js";import{jsx as n}from"react/jsx-runtime";const i=e.createContext(null);function o(r){const{children:o,itemId:l=null}=r,{instance:d,rootRef:s}=t(),u=e.useRef(new Map);e.useEffect((()=>{if(!s.current)return;let e=null;if(null==l)e=s.current.id;else{const r=d.getItemMeta(l);void 0!==r&&(e=d.getTreeItemIdAttribute(l,r.idAttribute))}if(null==e)return;const r=d.getItemOrderedChildrenIds(l??null)??[],t=s.current.querySelectorAll(`${null==l?"":`*[id="${e}"] `}[role="treeitem"]:not(*[id="${e}"] [role="treeitem"] [role="treeitem"])`),n=Array.from(t).map((e=>u.current.get(e.id)));(n.length!==r.length||n.some(((e,t)=>e!==r[t])))&&d.setJSXItemsOrderedChildrenIds(l??null,n)}));const c=e.useMemo((()=>({registerChild:(e,r)=>u.current.set(e,r),unregisterChild:e=>u.current.delete(e),parentId:l})),[l]);return n(i.Provider,{value:c,children:o})}"production"!==process.env.NODE_ENV&&(i.displayName="TreeViewChildrenItemContext"),"production"!==process.env.NODE_ENV&&(o.propTypes={children:r.node,id:r.string});export{i as TreeViewChildrenItemContext,o as TreeViewChildrenItemProvider};

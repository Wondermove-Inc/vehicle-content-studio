import e from"../../../../../@babel/runtime/helpers/esm/extends.js";import*as t from"react";import a from"../../../../utils/useEventCallback/useEventCallback.js";const n=({instance:e,params:n,models:s})=>{const d=t.useMemo((()=>{const e=new Map;return s.expandedItems.value.forEach((t=>{e.set(t,!0)})),e}),[s.expandedItems.value]),l=(e,t)=>{n.onExpandedItemsChange?.(e,t),s.expandedItems.setControlledValue(t)},m=t.useCallback((e=>d.has(e)),[d]),o=t.useCallback((t=>!!e.getItemMeta(t)?.expandable),[e]),p=a(((t,a)=>{const n=e.isItemExpanded(a);e.setItemExpansion(t,a,!n)})),I=a(((t,a,d)=>{if(e.isItemExpanded(a)===d)return;let m;m=d?[a].concat(s.expandedItems.value):s.expandedItems.value.filter((e=>e!==a)),n.onItemExpansionToggle&&n.onItemExpansionToggle(t,a,d),l(t,m)}));return{publicAPI:{setItemExpansion:I},instance:{isItemExpanded:m,isItemExpandable:o,setItemExpansion:I,toggleItemExpansion:p,expandAllSiblings:(t,a)=>{const d=e.getItemMeta(a),m=e.getItemOrderedChildrenIds(d.parentId).filter((t=>e.isItemExpandable(t)&&!e.isItemExpanded(t))),o=s.expandedItems.value.concat(m);m.length>0&&(n.onItemExpansionToggle&&m.forEach((e=>{n.onItemExpansionToggle(t,e,!0)})),l(t,o))}}}};n.models={expandedItems:{getDefaultValue:e=>e.defaultExpandedItems}};const s=[];n.getDefaultizedParams=t=>e({},t,{defaultExpandedItems:t.defaultExpandedItems??s}),n.params={expandedItems:!0,defaultExpandedItems:!0,onExpandedItemsChange:!0,onItemExpansionToggle:!0};export{n as useTreeViewExpansion};

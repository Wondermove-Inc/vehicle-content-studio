import e from"../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import o from"../../../@babel/runtime/helpers/esm/extends.js";import*as t from"react";import n from"../../../prop-types/index.js";import{clsx as r}from"../node_modules/clsx/dist/clsx.js";import{shouldForwardProp as a}from"../../system/createStyled.js";import{createUseThemeProps as i}from"../internals/zero-styled/index.js";import{TreeItemContent as s}from"./TreeItemContent.js";import{treeItemClasses as l,getTreeItemUtilityClass as c}from"./treeItemClasses.js";import{useTreeViewContext as p}from"../internals/TreeViewProvider/useTreeViewContext.js";import{jsx as d,jsxs as m}from"react/jsx-runtime";import u from"../../material/styles/styled.js";import b from"../../material/Collapse/Collapse.js";import{TreeViewItemDepthContext as f}from"../internals/TreeViewItemDepthContext/TreeViewItemDepthContext.js";import y from"../../utils/useForkRef/useForkRef.js";import{TreeViewExpandIcon as I,TreeViewCollapseIcon as v}from"../icons/icons.js";import{useSlotProps as g}from"../../base/utils/useSlotProps.js";import{TreeItem2Provider as C}from"../TreeItem2Provider/TreeItem2Provider.js";import h from"../../utils/elementTypeAcceptingRef/elementTypeAcceptingRef.js";import x from"../../utils/unsupportedProp/unsupportedProp.js";import T from"../../utils/composeClasses/composeClasses.js";import{resolveComponentProps as w}from"../../base/utils/resolveComponentProps.js";import{alpha as j}from"../../system/esm/colorManipulator.js";const P=["children","className","slots","slotProps","ContentComponent","ContentProps","itemId","id","label","onClick","onMouseDown","onFocus","onBlur","onKeyDown"],S=["ownerState"],k=["ownerState"],$=["ownerState"],O=i(),D=u("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(e,o)=>o.root})({listStyle:"none",margin:0,padding:0,outline:0}),R=u(s,{name:"MuiTreeItem",slot:"Content",overridesResolver:(e,o)=>[o.content,o.iconContainer&&{[`& .${l.iconContainer}`]:o.iconContainer},o.label&&{[`& .${l.label}`]:o.label}],shouldForwardProp:e=>a(e)&&"indentationAtItemLevel"!==e})((({theme:e})=>({padding:e.spacing(.5,1),borderRadius:e.shape.borderRadius,width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",gap:e.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${l.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${l.focused}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${l.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:j(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:j(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:j(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${l.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:j(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`& .${l.iconContainer}`]:{width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${l.label}`]:o({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},e.typography.body1),[`& .${l.checkbox}`]:{padding:0},variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:`calc(${e.spacing(1)} + var(--TreeView-itemChildrenIndentation) * var(--TreeView-itemDepth))`}}]}))),A=u(b,{name:"MuiTreeItem",slot:"GroupTransition",overridesResolver:(e,o)=>o.groupTransition,shouldForwardProp:e=>a(e)&&"indentationAtItemLevel"!==e})({margin:0,padding:0,paddingLeft:"var(--TreeView-itemChildrenIndentation)",variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:0}}]}),F=t.forwardRef((function(n,a){const{icons:i,runItemPlugins:l,selection:{multiSelect:u},disabledItemsFocusable:b,indentationAtItemLevel:h,instance:x}=p(),j=t.useContext(f),F=O({props:n,name:"MuiTreeItem"}),{children:L,className:V,slots:M,slotProps:N,ContentComponent:B=s,ContentProps:K,itemId:z,id:E,label:W,onClick:_,onMouseDown:q,onBlur:G,onKeyDown:H}=F,J=e(F,P),{contentRef:Q,rootRef:U}=l(F),X=y(a,U),Y=y(K?.ref,Q),Z={expandIcon:M?.expandIcon??i.slots.expandIcon??I,collapseIcon:M?.collapseIcon??i.slots.collapseIcon??v,endIcon:M?.endIcon??i.slots.endIcon,icon:M?.icon,groupTransition:M?.groupTransition},ee=e=>Array.isArray(e)?e.length>0&&e.some(ee):Boolean(e),oe=ee(L),te=x.isItemExpanded(z),ne=x.isItemFocused(z),re=x.isItemSelected(z),ae=x.isItemDisabled(z),ie=o({},F,{expanded:te,focused:ne,selected:re,disabled:ae,indentationAtItemLevel:h}),se=(e=>{const{classes:o}=e;return T({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],checkbox:["checkbox"],label:["label"],groupTransition:["groupTransition"]},c,o)})(ie),le=Z.groupTransition??void 0,ce=g({elementType:le,ownerState:{},externalSlotProps:N?.groupTransition,additionalProps:o({unmountOnExit:!0,in:te,component:"ul",role:"group"},h?{indentationAtItemLevel:!0}:{}),className:se.groupTransition}),pe=te?Z.collapseIcon:Z.expandIcon,de=g({elementType:pe,ownerState:{},externalSlotProps:e=>te?o({},w(i.slotProps.collapseIcon,e),w(N?.collapseIcon,e)):o({},w(i.slotProps.expandIcon,e),w(N?.expandIcon,e))}),me=e(de,S),ue=oe&&pe?d(pe,o({},me)):null,be=oe?void 0:Z.endIcon,fe=g({elementType:be,ownerState:{},externalSlotProps:e=>oe?{}:o({},w(i.slotProps.endIcon,e),w(N?.endIcon,e))}),ye=e(fe,k),Ie=be?d(be,o({},ye)):null,ve=Z.icon,ge=g({elementType:ve,ownerState:{},externalSlotProps:N?.icon}),Ce=e(ge,$),he=ve?d(ve,o({},Ce)):null;let xe;u?xe=re:re&&(xe=!0);const Te=x.getTreeItemIdAttribute(z,E),we=x.canItemBeTabbed(z)?0:-1;return d(C,{itemId:z,children:m(D,o({className:r(se.root,V),role:"treeitem","aria-expanded":oe?te:void 0,"aria-selected":xe,"aria-disabled":ae||void 0,id:Te,tabIndex:we},J,{ownerState:ie,onFocus:function(e){!ne&&(!ae||b)&&e.currentTarget===e.target&&x.focusItem(e,z)},onBlur:function(e){G?.(e),x.removeFocusedItem()},onKeyDown:e=>{H?.(e),x.handleItemKeyDown(e,z)},ref:X,style:h?o({},J.style,{"--TreeView-itemDepth":"function"==typeof j?j(z):j}):J.style,children:[d(R,o({as:B,classes:{root:se.content,expanded:se.expanded,selected:se.selected,focused:se.focused,disabled:se.disabled,iconContainer:se.iconContainer,label:se.label,checkbox:se.checkbox},label:W,itemId:z,onClick:_,onMouseDown:q,icon:he,expansionIcon:ue,displayIcon:Ie,ownerState:ie},K,{ref:Y})),L&&d(A,o({as:le},ce,{children:L}))]}))})}));"production"!==process.env.NODE_ENV&&(F.propTypes={children:n.node,classes:n.object,className:n.string,ContentComponent:h,ContentProps:n.object,disabled:n.bool,itemId:n.string.isRequired,label:n.node,onFocus:x,onKeyDown:n.func,slotProps:n.object,slots:n.object,sx:n.oneOfType([n.arrayOf(n.oneOfType([n.func,n.object,n.bool])),n.func,n.object])});export{F as TreeItem};

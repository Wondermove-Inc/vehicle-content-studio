import t from"../../../@babel/runtime/helpers/esm/extends.js";import e from"../../../dayjs/dayjs.min.js";import s from"../../../dayjs/plugin/weekOfYear.js";import i from"../../../dayjs/plugin/customParseFormat.js";import a from"../../../dayjs/plugin/localizedFormat.js";import n from"../../../dayjs/plugin/isBetween.js";import o from"../../../dayjs/plugin/advancedFormat.js";import{buildWarning as h}from"../internals/utils/warning.js";e.extend(a),e.extend(s),e.extend(n),e.extend(o);const r=h(["Your locale has not been found.","Either the locale key is not a supported one. Locales supported by dayjs are available here: https://github.com/iamkun/dayjs/tree/dev/src/locale","Or you forget to import the locale from 'dayjs/locale/{localeUsed}'","fallback on English locale"]),d={YY:"year",YYYY:{sectionType:"year",contentType:"digit",maxLength:4},M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMM:{sectionType:"month",contentType:"letter"},MMMM:{sectionType:"month",contentType:"letter"},D:{sectionType:"day",contentType:"digit",maxLength:2},DD:"day",Do:{sectionType:"day",contentType:"digit-with-letter"},d:{sectionType:"weekDay",contentType:"digit",maxLength:2},dd:{sectionType:"weekDay",contentType:"letter"},ddd:{sectionType:"weekDay",contentType:"letter"},dddd:{sectionType:"weekDay",contentType:"letter"},A:"meridiem",a:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},u={year:"YYYY",month:"MMMM",monthShort:"MMM",dayOfMonth:"D",dayOfMonthFull:"Do",weekday:"dddd",weekdayShort:"dd",hours24h:"HH",hours12h:"hh",meridiem:"A",minutes:"mm",seconds:"ss",fullDate:"ll",keyboardDate:"L",shortDate:"MMM D",normalDate:"D MMMM",normalDateWithWeekday:"ddd, MMM D",fullTime:"LT",fullTime12h:"hh:mm A",fullTime24h:"HH:mm",keyboardDateTime:"L LT",keyboardDateTime12h:"L hh:mm A",keyboardDateTime24h:"L HH:mm"},l=["Missing UTC plugin","To be able to use UTC or timezones, you have to enable the `utc` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-utc"].join("\n"),m=["Missing timezone plugin","To be able to use timezones, you have to enable both the `utc` and the `timezone` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-timezone"].join("\n");class f{constructor({locale:s,formats:a}={}){var n,o;this.isMUIAdapter=!0,this.isTimezoneCompatible=!0,this.lib="dayjs",this.dayjs=void 0,this.locale=void 0,this.formats=void 0,this.escapedCharacters={start:"[",end:"]"},this.formatTokenMap=d,this.setLocaleToValue=t=>{const e=this.getCurrentLocaleCode();return e===t.locale()?t:t.locale(e)},this.hasUTCPlugin=()=>void 0!==e.utc,this.hasTimezonePlugin=()=>void 0!==e.tz,this.isSame=(t,e,s)=>{const i=this.setTimezone(e,this.getTimezone(t));return t.format(s)===i.format(s)},this.cleanTimezone=t=>{switch(t){case"default":return;case"system":return e.tz.guess();default:return t}},this.createSystemDate=t=>{if(this.hasUTCPlugin()&&this.hasTimezonePlugin()){const s=e.tz.guess();return"UTC"!==s?e.tz(t,s):e(t)}return e(t)},this.createUTCDate=t=>{if(!this.hasUTCPlugin())throw new Error(l);return e.utc(t)},this.createTZDate=(t,s)=>{if(!this.hasUTCPlugin())throw new Error(l);if(!this.hasTimezonePlugin())throw new Error(m);const i=void 0!==t&&!t.endsWith("Z");return e(t).tz(this.cleanTimezone(s),i)},this.getLocaleFormats=()=>{const t=e.Ls;let s=t[this.locale||"en"];return void 0===s&&(r(),s=t.en),s.formats},this.adjustOffset=t=>{if(!this.hasTimezonePlugin())return t;const e=this.getTimezone(t);if("UTC"!==e){const s=t.tz(this.cleanTimezone(e),!0);if((s.$offset??0)===(t.$offset??0))return t;t.$offset=s.$offset}return t},this.date=(t,e="default")=>{if(null===t)return null;let s;return s="UTC"===e?this.createUTCDate(t):"system"===e||"default"===e&&!this.hasTimezonePlugin()?this.createSystemDate(t):this.createTZDate(t,e),void 0===this.locale?s:s.locale(this.locale)},this.getInvalidDate=()=>e(new Date("Invalid date")),this.getTimezone=t=>{if(this.hasTimezonePlugin()){const e=t.$x?.$timezone;if(e)return e}return this.hasUTCPlugin()&&t.isUTC()?"UTC":"system"},this.setTimezone=(t,s)=>{if(this.getTimezone(t)===s)return t;if("UTC"===s){if(!this.hasUTCPlugin())throw new Error(l);return t.utc()}if("system"===s)return t.local();if(!this.hasTimezonePlugin()){if("default"===s)return t;throw new Error(m)}return e.tz(t,this.cleanTimezone(s))},this.toJsDate=t=>t.toDate(),this.parse=(t,e)=>""===t?null:this.dayjs(t,e,this.locale,!0),this.getCurrentLocaleCode=()=>this.locale||"en",this.is12HourCycleInCurrentLocale=()=>/A|a/.test(this.getLocaleFormats().LT||""),this.expandFormat=t=>{const e=this.getLocaleFormats();return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,((t,s,i)=>{const a=i&&i.toUpperCase();return s||e[i]||e[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,((t,e,s)=>e||s.slice(1)))}))},this.isValid=t=>null!=t&&t.isValid(),this.format=(t,e)=>this.formatByString(t,this.formats[e]),this.formatByString=(t,e)=>this.dayjs(t).format(e),this.formatNumber=t=>t,this.isEqual=(t,e)=>null===t&&null===e||null!==t&&null!==e&&t.toDate().getTime()===e.toDate().getTime(),this.isSameYear=(t,e)=>this.isSame(t,e,"YYYY"),this.isSameMonth=(t,e)=>this.isSame(t,e,"YYYY-MM"),this.isSameDay=(t,e)=>this.isSame(t,e,"YYYY-MM-DD"),this.isSameHour=(t,e)=>t.isSame(e,"hour"),this.isAfter=(t,e)=>t>e,this.isAfterYear=(t,e)=>this.hasUTCPlugin()?!this.isSameYear(t,e)&&t.utc()>e.utc():t.isAfter(e,"year"),this.isAfterDay=(t,e)=>this.hasUTCPlugin()?!this.isSameDay(t,e)&&t.utc()>e.utc():t.isAfter(e,"day"),this.isBefore=(t,e)=>t<e,this.isBeforeYear=(t,e)=>this.hasUTCPlugin()?!this.isSameYear(t,e)&&t.utc()<e.utc():t.isBefore(e,"year"),this.isBeforeDay=(t,e)=>this.hasUTCPlugin()?!this.isSameDay(t,e)&&t.utc()<e.utc():t.isBefore(e,"day"),this.isWithinRange=(t,[e,s])=>t>=e&&t<=s,this.startOfYear=t=>this.adjustOffset(t.startOf("year")),this.startOfMonth=t=>this.adjustOffset(t.startOf("month")),this.startOfWeek=t=>this.adjustOffset(t.startOf("week")),this.startOfDay=t=>this.adjustOffset(t.startOf("day")),this.endOfYear=t=>this.adjustOffset(t.endOf("year")),this.endOfMonth=t=>this.adjustOffset(t.endOf("month")),this.endOfWeek=t=>this.adjustOffset(t.endOf("week")),this.endOfDay=t=>this.adjustOffset(t.endOf("day")),this.addYears=(t,e)=>this.adjustOffset(e<0?t.subtract(Math.abs(e),"year"):t.add(e,"year")),this.addMonths=(t,e)=>this.adjustOffset(e<0?t.subtract(Math.abs(e),"month"):t.add(e,"month")),this.addWeeks=(t,e)=>this.adjustOffset(e<0?t.subtract(Math.abs(e),"week"):t.add(e,"week")),this.addDays=(t,e)=>this.adjustOffset(e<0?t.subtract(Math.abs(e),"day"):t.add(e,"day")),this.addHours=(t,e)=>this.adjustOffset(e<0?t.subtract(Math.abs(e),"hour"):t.add(e,"hour")),this.addMinutes=(t,e)=>this.adjustOffset(e<0?t.subtract(Math.abs(e),"minute"):t.add(e,"minute")),this.addSeconds=(t,e)=>this.adjustOffset(e<0?t.subtract(Math.abs(e),"second"):t.add(e,"second")),this.getYear=t=>t.year(),this.getMonth=t=>t.month(),this.getDate=t=>t.date(),this.getHours=t=>t.hour(),this.getMinutes=t=>t.minute(),this.getSeconds=t=>t.second(),this.getMilliseconds=t=>t.millisecond(),this.setYear=(t,e)=>this.adjustOffset(t.set("year",e)),this.setMonth=(t,e)=>this.adjustOffset(t.set("month",e)),this.setDate=(t,e)=>this.adjustOffset(t.set("date",e)),this.setHours=(t,e)=>this.adjustOffset(t.set("hour",e)),this.setMinutes=(t,e)=>this.adjustOffset(t.set("minute",e)),this.setSeconds=(t,e)=>this.adjustOffset(t.set("second",e)),this.setMilliseconds=(t,e)=>this.adjustOffset(t.set("millisecond",e)),this.getDaysInMonth=t=>t.daysInMonth(),this.getWeekArray=t=>{const e=this.setLocaleToValue(t),s=this.startOfWeek(this.startOfMonth(e)),i=this.endOfWeek(this.endOfMonth(e));let a=0,n=s;const o=[];for(;n<i;){const t=Math.floor(a/7);o[t]=o[t]||[],o[t].push(n),n=this.addDays(n,1),a+=1}return o},this.getWeekNumber=t=>t.week(),this.getYearRange=([t,e])=>{const s=this.startOfYear(t),i=this.endOfYear(e),a=[];let n=s;for(;this.isBefore(n,i);)a.push(n),n=this.addYears(n,1);return a},this.dayjs=(n=e,(o=s)?(...t)=>n(...t).locale(o):n),this.locale=s,this.formats=t({},u,a),e.extend(i)}getDayOfWeek(t){return t.day()+1}}export{f as AdapterDayjs};

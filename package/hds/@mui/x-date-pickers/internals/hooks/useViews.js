import*as e from"react";import n from"../../../utils/useControlled/useControlled.js";import o from"../../../utils/useEventCallback/useEventCallback.js";let s=!1;function t({onChange:t,onViewChange:u,openTo:l,view:i,views:r,autoFocus:c,focusedView:a,onFocusedViewChange:d}){"production"!==process.env.NODE_ENV&&(s||(null==i||r.includes(i)||(console.warn(`MUI X: \`view="${i}"\` is not a valid prop.`,`It must be an element of \`views=["${r.join('", "')}"]\`.`),s=!0),null!=i||null==l||r.includes(l)||(console.warn(`MUI X: \`openTo="${l}"\` is not a valid prop.`,`It must be an element of \`views=["${r.join('", "')}"]\`.`),s=!0)));const f=e.useRef(l),w=e.useRef(r),V=e.useRef(r.includes(l)?l:r[0]),[p,m]=n({name:"useViews",state:"view",controlled:i,default:V.current}),v=e.useRef(c?p:null),[x,C]=n({name:"useViews",state:"focusedView",controlled:a,default:v.current});e.useEffect((()=>{(f.current&&f.current!==l||w.current&&w.current.some((e=>!r.includes(e))))&&(m(r.includes(l)?l:r[0]),w.current=r,f.current=l)}),[l,m,p,r]);const g=r.indexOf(p),h=r[g-1]??null,E=r[g+1]??null,b=o(((e,n)=>{C(n?e:n=>e===n?null:n),d?.(e,n)})),j=o((e=>{b(e,!0),e!==p&&(m(e),u&&u(e))})),I=o((()=>{E&&j(E)})),N=o(((e,n,o)=>{const s="finish"===n,u=o?r.indexOf(o)<r.length-1:Boolean(E);if(t(e,s&&u?"partial":n,o),o&&o!==p){const e=r[r.indexOf(o)+1];e&&j(e)}else s&&I()}));return{view:p,setView:j,focusedView:x,setFocusedView:b,nextView:E,previousView:h,defaultView:r.includes(l)?l:r[0],goToNextView:I,setValueAndGoToNextView:N}}export{t as useViews};

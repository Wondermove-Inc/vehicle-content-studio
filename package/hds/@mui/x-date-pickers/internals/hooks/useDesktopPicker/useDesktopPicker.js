import e from"../../../../../@babel/runtime/helpers/esm/extends.js";import o from"../../../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import*as t from"react";import{PickersPopper as r}from"../../components/PickersPopper.js";import{useUtils as s}from"../useUtils.js";import{jsx as n,jsxs as i}from"react/jsx-runtime";import l from"../../../../utils/useId/useId.js";import{usePicker as a}from"../usePicker/usePicker.js";import p from"../../../../material/InputAdornment/InputAdornment.js";import{useSlotProps as c}from"../../../../base/utils/useSlotProps.js";import d from"../../../../material/IconButton/IconButton.js";import{PickersLayout as u}from"../../../PickersLayout/PickersLayout.js";import m from"../../../../utils/useForkRef/useForkRef.js";import{LocalizationProvider as f}from"../../../LocalizationProvider/LocalizationProvider.js";const P=["props","getOpenDialogAriaText"],b=["ownerState"],S=["ownerState"],h=h=>{let{props:k,getOpenDialogAriaText:j}=h,x=o(h,P);const{slots:I,slotProps:y,className:F,sx:A,format:R,formatDensity:w,enableAccessibleFieldDOMStructure:g,selectedSections:O,onSelectedSectionsChange:T,timezone:B,name:D,label:v,inputRef:C,readOnly:L,disabled:V,autoFocus:z,localeText:M,reduceAnimations:N}=k,U=s(),$=t.useRef(null),E=t.useRef(null),W=l(),q=y?.toolbar?.hidden??!1,{open:G,actions:H,hasUIView:J,layoutProps:K,renderCurrentView:Q,shouldRestoreFocus:X,fieldProps:Y}=a(e({},x,{props:k,fieldRef:E,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),Z=I.inputAdornment??p,_=c({elementType:Z,externalSlotProps:y?.inputAdornment,additionalProps:{position:"end"},ownerState:k}),ee=o(_,b),oe=I.openPickerButton??d,te=c({elementType:oe,externalSlotProps:y?.openPickerButton,additionalProps:{disabled:V||L,onClick:G?H.onClose:H.onOpen,"aria-label":j(Y.value,U),edge:ee.position},ownerState:k}),re=o(te,S),se=I.openPickerIcon,ne=I.field,ie=c({elementType:ne,externalSlotProps:y?.field,additionalProps:e({},Y,q&&{id:W},{readOnly:L,disabled:V,className:F,sx:A,format:R,formatDensity:w,enableAccessibleFieldDOMStructure:g,selectedSections:O,onSelectedSectionsChange:T,timezone:B,label:v,name:D,autoFocus:z&&!k.open,focused:!!G||void 0},C?{inputRef:C}:{}),ownerState:k});J&&(ie.InputProps=e({},ie.InputProps,{ref:$},!k.disableOpenPicker&&{[`${ee.position}Adornment`]:n(Z,e({},ee,{children:n(oe,e({},re,{children:n(se,e({},y?.openPickerIcon))}))}))}));const le=e({textField:I.textField,clearIcon:I.clearIcon,clearButton:I.clearButton},ie.slots),ae=I.layout??u;let pe=W;q&&(pe=v?`${W}-label`:void 0);const ce=e({},y,{toolbar:e({},y?.toolbar,{titleId:W}),popper:e({"aria-labelledby":pe},y?.popper)}),de=m(E,ie.unstableFieldRef);return{renderPicker:()=>i(f,{localeText:M,children:[n(ne,e({},ie,{slots:le,slotProps:ce,unstableFieldRef:de})),n(r,e({role:"dialog",placement:"bottom-start",anchorEl:$.current},H,{open:G,slots:I,slotProps:ce,shouldRestoreFocus:X,reduceAnimations:N,children:n(ae,e({},K,ce?.layout,{slots:I,slotProps:ce,children:Q()}))}))]})}};export{h as useDesktopPicker};

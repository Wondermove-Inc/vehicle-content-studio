import{getMonthsInYear as t}from"../../utils/date-utils.js";const e=(t,e)=>{const n=t.formatTokenMap[e];if(null==n)throw new Error([`MUI X: The token "${e}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join("\n"));return"string"==typeof n?{type:n,contentType:"meridiem"===n?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},n=(t,e,n)=>{const r=[],o=t.date(void 0,e),a=t.startOfWeek(o),i=t.endOfWeek(o);let s=a;for(;t.isBefore(s,i);)r.push(s),s=t.addDays(s,1);return r.map((e=>t.formatByString(e,n)))},r=(e,r,o,a)=>{switch(o){case"month":return t(e,e.date(void 0,r)).map((t=>e.formatByString(t,a)));case"weekDay":return n(e,r,a);case"meridiem":{const t=e.date(void 0,r);return[e.startOfDay(t),e.endOfDay(t)].map((t=>e.formatByString(t,a)))}default:return[]}},o="s",a=["0","1","2","3","4","5","6","7","8","9"],i=t=>{const e=t.date(void 0);return"0"===t.formatByString(t.setSeconds(e,0),"s")?a:Array.from({length:10}).map(((n,r)=>t.formatByString(t.setSeconds(e,r),"s")))},s=(t,e)=>{if("0"===e[0])return t;const n=[];let r="";for(let o=0;o<t.length;o+=1){r+=t[o];const a=e.indexOf(r);a>-1&&(n.push(a.toString()),r="")}return n.join("")},m=(t,e)=>"0"===e[0]?t:t.split("").map((t=>e[Number(t)])).join(""),u=(t,e)=>{const n=s(t,e);return!Number.isNaN(Number(n))},d=(t,e)=>{let n=t;for(n=Number(n).toString();n.length<e;)n=`0${n}`;return n},c=(t,e,n,r,o)=>{if("production"!==process.env.NODE_ENV&&"day"!==o.type&&"digit-with-letter"===o.contentType)throw new Error([`MUI X: The token "${o.format}" is a digit format with letter in it.'\n             This type of format is only supported for 'day' sections`].join("\n"));if("day"===o.type&&"digit-with-letter"===o.contentType){const r=t.setDate(n.longestMonth,e);return t.formatByString(r,o.format)}let a=e.toString();return o.hasLeadingZerosInInput&&(a=d(a,o.maxLength)),m(a,r)},l=(t,e,n,o,a,i,m,u)=>{const d=(t=>{switch(t){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}})(o),l="Home"===o,h="End"===o,p=""===n.value||l||h;return"digit"===n.contentType||"digit-with-letter"===n.contentType?(()=>{const r=a[n.type]({currentDate:m,format:n.format,contentType:n.contentType}),o=e=>c(t,e,r,i,n),y="minutes"===n.type&&u?.minutesStep?u.minutesStep:1;let f=parseInt(s(n.value,i),10)+d*y;if(p){if("year"===n.type&&!h&&!l)return t.formatByString(t.date(void 0,e),n.format);f=d>0||l?r.minimum:r.maximum}return f%y!=0&&((d<0||l)&&(f+=y-(y+f)%y),(d>0||h)&&(f-=f%y)),f>r.maximum?o(r.minimum+(f-r.maximum-1)%(r.maximum-r.minimum+1)):f<r.minimum?o(r.maximum-(r.minimum-f-1)%(r.maximum-r.minimum+1)):o(f)})():(()=>{const o=r(t,e,n.type,n.format);if(0===o.length)return n.value;if(p)return d>0||l?o[0]:o[o.length-1];const a=o.indexOf(n.value);return o[((a+d)%o.length+o.length)%o.length]})()},h=(t,e,n)=>{let r=t.value||t.placeholder;const o="non-input"===e?t.hasLeadingZerosInFormat:t.hasLeadingZerosInInput;"non-input"===e&&t.hasLeadingZerosInInput&&!t.hasLeadingZerosInFormat&&(r=Number(s(r,n)).toString());return["input-rtl","input-ltr"].includes(e)&&"digit"===t.contentType&&!o&&1===r.length&&(r=`${r}‎`),"input-rtl"===e&&(r=`⁨${r}⁩`),r},p=(t,n,r,o)=>{if("production"!==process.env.NODE_ENV&&"weekDay"===e(t,r).type)throw new Error("changeSectionValueFormat doesn't support week day formats");return t.formatByString(t.parse(n,r),o)},y=(t,e,n)=>4===t.formatByString(t.date(void 0,e),n).length,f=(t,e,n,r,o)=>{if("digit"!==n)return!1;const a=t.date(void 0,e);switch(r){case"year":if(y(t,e,o)){return"0001"===t.formatByString(t.setYear(a,1),o)}return"01"===t.formatByString(t.setYear(a,2001),o);case"month":return t.formatByString(t.startOfYear(a),o).length>1;case"day":return t.formatByString(t.startOfMonth(a),o).length>1;case"weekDay":return t.formatByString(t.startOfWeek(a),o).length>1;case"hours":return t.formatByString(t.setHours(a,1),o).length>1;case"minutes":return t.formatByString(t.setMinutes(a,1),o).length>1;case"seconds":return t.formatByString(t.setSeconds(a,1),o).length>1;default:throw new Error("Invalid section type")}},g=(t,e,n)=>{const r=e.some((t=>"day"===t.type)),o=[],a=[];for(let t=0;t<e.length;t+=1){const i=e[t];r&&"weekDay"===i.type||(o.push(i.format),a.push(h(i,"non-input",n)))}const i=o.join(" "),s=a.join(" ");return t.parse(s,i)},x=t=>t.map((t=>`${t.startSeparator}${t.value||t.placeholder}${t.endSeparator}`)).join(""),S=(t,e,n)=>{const r=t.map((t=>{const r=h(t,n?"input-rtl":"input-ltr",e);return`${t.startSeparator}${r}${t.endSeparator}`})).join("");return n?`⁦${r}⁩`:r},v=(e,r,o)=>{const a=e.date(void 0,o),i=e.endOfYear(a),m=e.endOfDay(a),{maxDaysInMonth:u,longestMonth:d}=t(e,a).reduce(((t,n)=>{const r=e.getDaysInMonth(n);return r>t.maxDaysInMonth?{maxDaysInMonth:r,longestMonth:n}:t}),{maxDaysInMonth:0,longestMonth:null});return{year:({format:t})=>({minimum:0,maximum:y(e,o,t)?9999:99}),month:()=>({minimum:1,maximum:e.getMonth(i)+1}),day:({currentDate:t})=>({minimum:1,maximum:null!=t&&e.isValid(t)?e.getDaysInMonth(t):u,longestMonth:d}),weekDay:({format:t,contentType:r})=>{if("digit"===r){const r=n(e,o,t).map(Number);return{minimum:Math.min(...r),maximum:Math.max(...r)}}return{minimum:1,maximum:7}},hours:({format:t})=>{const n=e.getHours(m);return s(e.formatByString(e.endOfDay(a),t),r)!==n.toString()?{minimum:1,maximum:Number(s(e.formatByString(e.startOfDay(a),t),r))}:{minimum:0,maximum:n}},minutes:()=>({minimum:0,maximum:e.getMinutes(m)}),seconds:()=>({minimum:0,maximum:e.getSeconds(m)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}};let w=!1;const D=(t,e)=>{if("production"!==process.env.NODE_ENV&&!w){const n=["empty"];["date","date-time"].includes(e)&&n.push("weekDay","day","month","year"),["time","date-time"].includes(e)&&n.push("hours","minutes","seconds","meridiem");const r=t.find((t=>!n.includes(t.type)));r&&(console.warn(`MUI X: The field component you are using is not compatible with the "${r.type}" date section.`,`The supported date sections are ["${n.join('", "')}"]\`.`),w=!0)}},I={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},M=(t,e,r,o,a,i)=>[...o].sort(((t,e)=>I[t.type]-I[e.type])).reduce(((o,a)=>!i||a.modified?((t,e,r,o,a)=>{switch(r.type){case"year":return t.setYear(a,t.getYear(o));case"month":return t.setMonth(a,t.getMonth(o));case"weekDay":{const a=n(t,e,r.format),i=t.formatByString(o,r.format),s=a.indexOf(i),m=a.indexOf(r.value)-s;return t.addDays(o,m)}case"day":return t.setDate(a,t.getDate(o));case"meridiem":{const e=t.getHours(o)<12,n=t.getHours(a);return e&&n>=12?t.addHours(a,-12):!e&&n<12?t.addHours(a,12):a}case"hours":return t.setHours(a,t.getHours(o));case"minutes":return t.setMinutes(a,t.getMinutes(o));case"seconds":return t.setSeconds(a,t.getSeconds(o));default:return a}})(t,e,a,r,o):o),a),T=()=>navigator.userAgent.toLowerCase().indexOf("android")>-1,B=(t,e)=>{const n={};if(!e)return t.forEach(((e,r)=>{const o=0===r?null:r-1,a=r===t.length-1?null:r+1;n[r]={leftIndex:o,rightIndex:a}})),{neighbors:n,startIndex:0,endIndex:t.length-1};const r={},o={};let a=0,i=0,s=t.length-1;for(;s>=0;){i=t.findIndex(((t,e)=>e>=a&&t.endSeparator?.includes(" ")&&" / "!==t.endSeparator)),-1===i&&(i=t.length-1);for(let t=i;t>=a;t-=1)o[t]=s,r[s]=t,s-=1;a=i+1}return t.forEach(((e,a)=>{const i=o[a],s=0===i?null:r[i-1],m=i===t.length-1?null:r[i+1];n[a]={leftIndex:s,rightIndex:m}})),{neighbors:n,startIndex:r[0],endIndex:r[t.length-1]}},N=(t,e)=>null==t?null:"all"===t?"all":"string"==typeof t?e.findIndex((e=>e.type===t)):t,O=(t,e)=>{if(t.value)switch(t.type){case"month":{if("digit"===t.contentType)return e.format(e.setMonth(e.date(),Number(t.value)-1),"month");const n=e.parse(t.value,t.format);return n?e.format(n,"month"):void 0}case"day":return"digit"===t.contentType?e.format(e.setDate(e.startOfYear(e.date()),Number(t.value)),"dayOfMonthFull"):t.value;default:return}},b=(t,e)=>{if(t.value)switch(t.type){case"weekDay":if("letter"===t.contentType)return;return Number(t.value);case"meridiem":{const n=e.parse(`01:00 ${t.value}`,`${e.formats.hours12h}:${e.formats.minutes} ${t.format}`);return n?e.getHours(n)>=12?1:0:void 0}case"day":return"digit-with-letter"===t.contentType?parseInt(t.value,10):Number(t.value);case"month":{if("digit"===t.contentType)return Number(t.value);const n=e.parse(t.value,t.format);return n?e.getMonth(n)+1:void 0}default:return"letter"!==t.contentType?Number(t.value):void 0}};export{o as FORMAT_SECONDS_NO_LEADING_ZEROS,l as adjustSectionValue,m as applyLocalizedDigits,p as changeSectionValueFormat,c as cleanDigitSectionValue,d as cleanLeadingZeros,S as createDateStrForV6InputFromSections,x as createDateStrForV7HiddenInputFromSections,f as doesSectionFormatHaveLeadingZeros,g as getDateFromDateSections,e as getDateSectionConfigFromFormatToken,n as getDaysInWeekStr,r as getLetterEditingOptions,i as getLocalizedDigits,B as getSectionOrder,b as getSectionValueNow,O as getSectionValueText,h as getSectionVisibleValue,v as getSectionsBoundaries,T as isAndroid,u as isStringNumber,M as mergeDateIntoReferenceDate,N as parseSelectedSections,s as removeLocalizedDigits,D as validateSections};

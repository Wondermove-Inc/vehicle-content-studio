import e from"../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import o from"../../../@babel/runtime/helpers/esm/extends.js";import*as t from"react";import s from"../../../prop-types/index.js";import{clsx as a}from"../node_modules/clsx/dist/clsx.js";import{useRtl as r}from"../../system/esm/RtlProvider/index.js";import{PickersMonth as n}from"./PickersMonth.js";import{useNow as l,useUtils as i,useDefaultDates as u}from"../internals/hooks/useUtils.js";import{getMonthCalendarUtilityClass as m}from"./monthCalendarClasses.js";import{getMonthsInYear as c,applyDefaultDate as d}from"../internals/utils/date-utils.js";import{singleItemValueManager as f}from"../internals/utils/valueManagers.js";import{SECTION_TYPE_GRANULARITY as h}from"../internals/utils/getDefaultReferenceDate.js";import{useControlledValueWithTimezone as p}from"../internals/hooks/useValueWithTimezone.js";import{DIALOG_WIDTH as b}from"../internals/constants/dimensions.js";import{jsx as g}from"react/jsx-runtime";import j from"../../material/styles/styled.js";import D from"../../utils/useControlled/useControlled.js";import M from"../../utils/useEventCallback/useEventCallback.js";import C from"../../utils/composeClasses/composeClasses.js";import v from"../../material/styles/useThemeProps.js";const x=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"];function y(e,t){const s=i(),a=u(),r=v({props:e,name:t});return o({disableFuture:!1,disablePast:!1},r,{minDate:d(s,r.minDate,a.minDate),maxDate:d(s,r.maxDate,a.maxDate)})}const F=j("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(e,o)=>o.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:b,boxSizing:"border-box"}),w=t.forwardRef((function(s,u){const d=y(s,"MuiMonthCalendar"),{className:b,value:j,defaultValue:v,referenceDate:w,disabled:P,disableFuture:k,disablePast:O,maxDate:R,minDate:V,onChange:z,shouldDisableMonth:T,readOnly:A,autoFocus:N=!1,onMonthFocus:E,hasFocus:I,onFocusedViewChange:L,monthsPerRow:S=3,timezone:B,gridLabelId:W,slots:H,slotProps:U}=d,_=e(d,x),{value:K,handleValueChange:q,timezone:G}=p({name:"MonthCalendar",timezone:B,value:j,defaultValue:v,onChange:z,valueManager:f}),J=l(G),Q=r(),X=i(),Y=t.useMemo((()=>f.getInitialReferenceValue({value:K,utils:X,props:d,timezone:G,referenceDate:w,granularity:h.month})),[]),Z=d,$=(e=>{const{classes:o}=e;return C({root:["root"]},m,o)})(Z),ee=t.useMemo((()=>X.getMonth(J)),[X,J]),oe=t.useMemo((()=>null!=K?X.getMonth(K):null),[K,X]),[te,se]=t.useState((()=>oe||X.getMonth(Y))),[ae,re]=D({name:"MonthCalendar",state:"hasFocus",controlled:I,default:N??!1}),ne=M((e=>{re(e),L&&L(e)})),le=t.useCallback((e=>{const o=X.startOfMonth(O&&X.isAfter(J,V)?J:V),t=X.startOfMonth(k&&X.isBefore(J,R)?J:R),s=X.startOfMonth(e);return!!X.isBefore(s,o)||(!!X.isAfter(s,t)||!!T&&T(s))}),[k,O,R,V,J,T,X]),ie=M(((e,o)=>{if(A)return;const t=X.setMonth(K??Y,o);q(t)})),ue=M((e=>{le(X.setMonth(K??Y,e))||(se(e),ne(!0),E&&E(e))}));t.useEffect((()=>{se((e=>null!==oe&&e!==oe?oe:e))}),[oe]);const me=M(((e,o)=>{const t=12;switch(e.key){case"ArrowUp":ue((t+o-3)%t),e.preventDefault();break;case"ArrowDown":ue((t+o+3)%t),e.preventDefault();break;case"ArrowLeft":ue((t+o+(Q?1:-1))%t),e.preventDefault();break;case"ArrowRight":ue((t+o+(Q?-1:1))%t),e.preventDefault()}})),ce=M(((e,o)=>{ue(o)})),de=M(((e,o)=>{te===o&&ne(!1)}));return g(F,o({ref:u,className:a($.root,b),ownerState:Z,role:"radiogroup","aria-labelledby":W},_,{children:c(X,K??Y).map((e=>{const o=X.getMonth(e),t=X.format(e,"monthShort"),s=X.format(e,"month"),a=o===oe,r=P||le(e);return g(n,{selected:a,value:o,onClick:ie,onKeyDown:me,autoFocus:ae&&o===te,disabled:r,tabIndex:o!==te||r?-1:0,onFocus:ce,onBlur:de,"aria-current":ee===o?"date":void 0,"aria-label":s,monthsPerRow:S,slots:H,slotProps:U,children:t},t)}))}))}));"production"!==process.env.NODE_ENV&&(w.propTypes={autoFocus:s.bool,classes:s.object,className:s.string,defaultValue:s.object,disabled:s.bool,disableFuture:s.bool,disableHighlightToday:s.bool,disablePast:s.bool,gridLabelId:s.string,hasFocus:s.bool,maxDate:s.object,minDate:s.object,monthsPerRow:s.oneOf([3,4]),onChange:s.func,onFocusedViewChange:s.func,onMonthFocus:s.func,readOnly:s.bool,referenceDate:s.object,shouldDisableMonth:s.func,slotProps:s.object,slots:s.object,sx:s.oneOfType([s.arrayOf(s.oneOfType([s.func,s.object,s.bool])),s.func,s.object]),timezone:s.string,value:s.object});export{w as MonthCalendar,y as useMonthCalendarDefaultizedProps};

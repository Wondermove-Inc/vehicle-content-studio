import e from"../../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";import t from"../../../../@babel/runtime/helpers/esm/extends.js";import*as o from"react";import n from"../../../../prop-types/index.js";import{useRtl as r}from"../../../system/esm/RtlProvider/index.js";import{pickersInputBaseClasses as i,getPickersInputBaseUtilityClass as s}from"./pickersInputBaseClasses.js";import{jsxs as a,jsx as l}from"react/jsx-runtime";import p from"../../../material/styles/styled.js";import{PickersSectionListRoot as d,PickersSectionListSection as c,PickersSectionListSectionContent as u,PickersSectionListSectionSeparator as m,PickersSectionList as f}from"../../PickersSectionList/PickersSectionList.js";import y from"../../../utils/visuallyHidden/visuallyHidden.js";import h from"../../../material/styles/useThemeProps.js";import b from"../../../utils/useForkRef/useForkRef.js";import R from"../../../material/FormControl/useFormControl.js";import{useSlotProps as S}from"../../../base/utils/useSlotProps.js";import g from"../../../utils/refType/refType.js";import x from"../../../utils/capitalize/capitalize.js";import P from"../../../utils/composeClasses/composeClasses.js";const v=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef"],j=p("div",{name:"MuiPickersInputBase",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>{return t({},e.typography.body1,{color:(e.vars||e).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:(o=.15/16,Math.round(1e5*o)/1e5)+"em",variants:[{props:{fullWidth:!0},style:{width:"100%"}}]});var o})),C=p(d,{name:"MuiPickersInputBase",slot:"SectionsContainer",overridesResolver:(e,t)=>t.sectionsContainer})((({theme:e})=>({padding:"4px 0 5px",fontFamily:e.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{isRtl:!0},style:{textAlign:"right /*! @noflip */"}},{props:{size:"small"},style:{paddingTop:1}},{props:{adornedStart:!1,focused:!1,filled:!1},style:{color:"currentColor",opacity:0}},{props:({adornedStart:e,focused:t,filled:o,label:n})=>!e&&!t&&!o&&null==n,style:e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:"light"===e.palette.mode?.42:.5}}]}))),I=p(c,{name:"MuiPickersInputBase",slot:"Section",overridesResolver:(e,t)=>t.section})((({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"flex"}))),q=p(u,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(e,t)=>t.content})((({theme:e})=>({fontFamily:e.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"}))),w=p(m,{name:"MuiPickersInputBase",slot:"Separator",overridesResolver:(e,t)=>t.separator})((()=>({whiteSpace:"pre",letterSpacing:"inherit"}))),B=p("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(e,t)=>t.hiddenInput})(t({},y)),F=o.forwardRef((function(n,p){const d=h({props:n,name:"MuiPickersInputBase"}),{elements:c,areAllSectionsEmpty:u,value:m,onChange:y,id:g,endAdornment:F,startAdornment:A,renderSuffix:O,slots:k,slotProps:E,contentEditable:T,tabIndex:M,onInput:z,onPaste:N,onKeyDown:L,name:W,readOnly:D,inputProps:H,inputRef:K,sectionListRef:V}=d,G=e(d,v),U=o.useRef(null),X=b(p,U),$=b(H?.ref,K),_=r(),J=R();if(!J)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");o.useEffect((()=>{J&&J.setAdornedStart(Boolean(A))}),[J,A]),o.useEffect((()=>{J&&(u?J.onEmpty():J.onFilled())}),[J,u]);const Q=t({},d,J,{isRtl:_}),Y=(e=>{const{focused:t,disabled:o,error:n,classes:r,fullWidth:i,readOnly:a,color:l,size:p,endAdornment:d,startAdornment:c}=e,u={root:["root",t&&!o&&"focused",o&&"disabled",a&&"readOnly",n&&"error",i&&"fullWidth",`color${x(l)}`,"small"===p&&"inputSizeSmall",Boolean(c)&&"adornedStart",Boolean(d)&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"]};return P(u,s,r)})(Q),Z=k?.root||j,ee=S({elementType:Z,externalSlotProps:E?.root,externalForwardedProps:G,additionalProps:{"aria-invalid":J.error,ref:X},className:Y.root,ownerState:Q}),te=k?.input||C;return a(Z,t({},ee,{children:[A,l(f,{sectionListRef:V,elements:c,contentEditable:T,tabIndex:M,className:Y.sectionsContainer,onFocus:e=>{J.disabled?e.stopPropagation():J.onFocus?.(e)},onBlur:J.onBlur,onInput:z,onPaste:N,onKeyDown:L,slots:{root:te,section:I,sectionContent:q,sectionSeparator:w},slotProps:{root:{ownerState:Q},sectionContent:{className:i.sectionContent},sectionSeparator:({position:e})=>({className:"before"===e?i.sectionBefore:i.sectionAfter})}}),F,O?O(t({},J)):null,l(B,t({name:W,className:Y.input,value:m,onChange:y,id:g,"aria-hidden":"true",tabIndex:-1,readOnly:D,required:J.required,disabled:J.disabled},H,{ref:$}))]}))}));"production"!==process.env.NODE_ENV&&(F.propTypes={areAllSectionsEmpty:n.bool.isRequired,className:n.string,component:n.elementType,contentEditable:n.bool.isRequired,elements:n.arrayOf(n.shape({after:n.object.isRequired,before:n.object.isRequired,container:n.object.isRequired,content:n.object.isRequired})).isRequired,endAdornment:n.node,fullWidth:n.bool,id:n.string,inputProps:n.object,inputRef:g,label:n.node,margin:n.oneOf(["dense","none","normal"]),name:n.string,onChange:n.func.isRequired,onClick:n.func.isRequired,onInput:n.func.isRequired,onKeyDown:n.func.isRequired,onPaste:n.func.isRequired,ownerState:n.any,readOnly:n.bool,renderSuffix:n.func,sectionListRef:n.oneOfType([n.func,n.shape({current:n.shape({getRoot:n.func.isRequired,getSectionContainer:n.func.isRequired,getSectionContent:n.func.isRequired,getSectionIndexFromDOMElement:n.func.isRequired})})]),slotProps:n.object,slots:n.object,startAdornment:n.node,style:n.object,sx:n.oneOfType([n.arrayOf(n.oneOfType([n.func,n.object,n.bool])),n.func,n.object]),value:n.string.isRequired});export{F as PickersInputBase,j as PickersInputBaseRoot,C as PickersInputBaseSectionsContainer};

import{getWeekYear as e}from"../../../getWeekYear.js";import{startOfWeek as r}from"../../../startOfWeek.js";import{Parser as t}from"../Parser.js";import{mapValue as s,parseNDigits as a,normalizeTwoDigitYear as i}from"../utils.js";class o extends t{priority=130;parse(e,r,t){const i=e=>({year:e,isTwoDigitYear:"YY"===r});switch(r){case"Y":return s(a(4,e),i);case"Yo":return s(t.ordinalNumber(e,{unit:"year"}),i);default:return s(a(r.length,e),i)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(t,s,a,o){const n=e(t,o);if(a.isTwoDigitYear){const e=i(a.year,n);return t.setFullYear(e,0,o.firstWeekContainsDate),t.setHours(0,0,0,0),r(t,o)}const u="era"in s&&1!==s.era?1-a.year:a.year;return t.setFullYear(u,0,o.firstWeekContainsDate),t.setHours(0,0,0,0),r(t,o)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}export{o as LocalWeekYearParser};
